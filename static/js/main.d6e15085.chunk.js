(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{203:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAQAAAD9CzEMAAAA0ElEQVR4Ae3NoSKEQRwA8T8AAAAAgEi+CqIkicALEL9GB6oEiKCSaVAAAAAAGGkXotsD9vcAM/IzWJZlWbThiKfgTQ+Ahxb40Y9ifkEQY6C1iFlEMIXyTJOYRRyzKI/UiFmksYhyR5WYRT7rKFeUiVkUs49yiks+DwdHPsDFKcoBJe7lgfcLKrlG2aLI/fy7BdXcoyyTJWJkoBbU8YQyT7IoZhY0gzZDrCjGFmjTRIhmfjFJsGjmFyP4i2Z+0YuPmKcXHXiJp+DQKt/IsizLegFpzjZcUhqNnAAAAABJRU5ErkJggg=="},204:function(e,t,a){e.exports=a.p+"static/media/trollface.eb3785ee.png"},212:function(e,t){e.exports="data:image/png;base64,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"},215:function(e,t,a){e.exports=a(433)},220:function(e,t,a){},342:function(e,t,a){"use strict";a.r(t);var n=a(6),r=a(200),o=a.n(r);n.addMethod(n.string,"isTax",function(e){return this.test("isTax",e,function(e){return!e||(14===e.length||10===e.length)})}),n.addMethod(n.object,"notEmpty",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Array is not Empty";return this.test("notEmpty",e,function(e){return!o()(e)})}),n.addMethod(n.string,"isPhone",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"This is not a phone number";return this.test("isPhone",e,function(e){return!1===/\D/gi.test(e)})}),n.addMethod(n.string,"onlyWord",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"There are other things than words";return this.test("onlyWord",e,function(e){return!1===/\W/gi.test(e)})}),n.addMethod(n.string,"haveChar",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Must have alphabet characters";return this.test("haveChar",e,function(e){return!0===/[a-z]/gi.test(e)})}),n.addMethod(n.string,"haveNumber",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Must have numbers";return this.test("haveNumber",e,function(e){return!0===/\d/gi.test(e)})}),n.addMethod(n.string,"equalTo",function(e,t){return this.test({name:"equalTo",exclusive:!1,message:t,params:{reference:e.path},test:function(t){return t===this.resolve(e)}})}),n.addMethod(n.string,"notEqualTo",function(e,t){return this.test({name:"notEqualTo",exclusive:!1,message:t,params:{reference:e.path},test:function(t){return t!==this.resolve(e)}})})},433:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(88),s=a.n(o),i=a(7),l=(a(220),a(1)),c=a(2),u=a(4),m=a(3),d=a(5),h=a(31),p=a(437),f=a(438),g=a(132),v=a.n(g),b=a(8),E=a.n(b),y=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).overlayElement=null,a.state={},document.body.style.overflowY="hidden",a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){setTimeout(function(){document.body.style.overflowY=null},300)}},{key:"render",value:function(){var e=this,t=this.props,a=t.className,n=t.onDismiss,o=t.content;return r.a.createElement("div",{className:E()("modal k-modal",a),onMouseDown:function(t){return t.target===e.overlayElement&&n()},ref:function(t){return e.overlayElement=t}},r.a.createElement("div",{className:"modal-overlay"},r.a.createElement("div",{className:"modal-content"},o)))}}]),t}(n.Component),A=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={modalList:[]},w.openModal=function(e){var t={options:e,resolve:null},n=a.state.modalList;return a.setState({modalList:n.concat([t])}),{dismiss:function(){a.dismiss(t)},close:function(e){a.close(t,e)},result:new Promise(function(e){t.resolve=e})}},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"dismiss",value:function(e){v()(this.state.modalList,e),e.resolve(),this.forceUpdate()}},{key:"close",value:function(e,t){v()(this.state.modalList,e),e.resolve(t),this.forceUpdate()}},{key:"render",value:function(){var e=this,t=this.state.modalList;return r.a.createElement(p.a,{className:"modals"},t.map(function(a,n){return r.a.createElement(f.a,{key:n,timeout:300,classNames:"slideIn"},r.a.createElement(y,{key:n,isStack:t.length>1,className:a.options.className,content:a.options.content,onDismiss:function(){return e.dismiss(a)}}))}))}}]),t}(n.Component),w={},k=a(9),N=a.n(k),C=a(12),S=function(e){return r.a.createElement("li",null,r.a.createElement(i.c,{className:"my-nav-link",to:e.link},e.children))},O=function(){return r.a.createElement("ul",{className:"secondary"},r.a.createElement(S,{link:"/"},"Free App"),r.a.createElement(S,{link:"/"},"9GAG Tee"," ",r.a.createElement("span",{role:"img","aria-label":"T-Shirt"},"\ud83d\udc55")),r.a.createElement(S,{link:"/"},"Rate My Outfit"),r.a.createElement(S,{link:"/"},"Crappy Design"),r.a.createElement(S,{link:"/"},"Near You"," ",r.a.createElement("span",{role:"img","aria-label":"Near you"},"\ud83d\udccd")),r.a.createElement(S,{link:"/"},"K-Pop"))},j=a(14),x=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{id:"header-search-dropdown",className:"popup-menu search"},r.a.createElement("form",{id:"headbar-search",onSubmit:null},r.a.createElement("div",{className:"headbar-search"},r.a.createElement("input",{type:"text",id:"search-input",className:"search-input",placeholder:"Type to search..."}))))}}]),t}(r.a.Component),P=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).setWrapperRef=a.setWrapperRef.bind(Object(j.a)(a)),a.handleClickOutside=a.handleClickOutside.bind(Object(j.a)(a)),a.handleToggleVisibility=a.handleToggleVisibility.bind(Object(j.a)(a)),a.state={visibility:!1,clickedOutside:!1},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"setWrapperRef",value:function(e){this.wrapperRef=e}},{key:"handleToggleVisibility",value:function(e){this.state.visibility?document.removeEventListener("click",this.handleClickOutside,!1):document.addEventListener("click",this.handleClickOutside,!1),this.setState(function(e){return{visibility:!e.visibility}})}},{key:"handleClickOutside",value:function(e){this.wrapperRef&&this.wrapperRef.contains(e.target)||this.handleToggleVisibility()}},{key:"render",value:function(){return r.a.createElement("span",null,r.a.createElement("div",{className:"general-function"},r.a.createElement("button",{id:"header-darkmode-btn",className:"darkmode-toggle"},"Dark mode"),r.a.createElement("button",{id:"header-search-btn",className:"search",onClick:this.handleToggleVisibility},"Search")),r.a.createElement("span",{ref:this.setWrapperRef},this.state.visibility&&r.a.createElement(x,null)))}}]),t}(n.Component),D=a(11),U=a(55),R=a.n(U),V=a(56),I=a.n(V),F=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).onUnmounts=[],a.onMounts=[],a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.mounted=!0,this.onMounts.forEach(function(e){return e()})}},{key:"componentWillUnmount",value:function(){this.mounted=!1,this.onUnmounts.forEach(function(e){return e()})}},{key:"onMount",value:function(e){this.onMounts.push(e)}},{key:"onUnmount",value:function(e){this.onUnmounts.push(e)}}]),t}(n.Component),L=a(24),M=a(131),T=a.n(M),_=a(198),B=a.n(_),W=a(93),G=a.n(W),H=a(199),z=a.n(H),q=function(e){return 13==e.keyCode};a(342);var Q=function(e,t){var a=Object.assign({},{validateOnBlur:!0,validateOnChange:!1,initData:{}},t),n=Object(L.a)({},a.initData),r={},o={},s=function(){var e={},t=function(t,n){return G()(e[t])&&(e[t]=[]),e[t].push(n),function(){a(t,n)}},a=function(t,a){if(!G()(e[t])){var n=e[t].indexOf(a);e[t].splice(n,1)}};return{on:t,events:function(){return e},emit:function(t){for(var a=arguments.length,n=new Array(a>1?a-1:0),r=1;r<a;r++)n[r-1]=arguments[r];G()(e[t])||z()(e[t],function(e){e.apply(void 0,n)})},removeListener:a,once:function(e,n){t(e,function t(){a(e,t);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];n(o)})}}}(),i=function(e){return T()(n,e)},l=function(e,t){B()(n,e,function(){return t})},c=function(){var t=Object(C.a)(N.a.mark(function t(){return N.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.validate(Object(L.a)({},n),{abortEarly:!1});case 3:r={},t.next=10;break;case 6:t.prev=6,t.t0=t.catch(0),r={},t.t0.inner&&t.t0.inner.length>0?t.t0.inner.forEach(function(e){r[e.path]=e}):r[t.t0.path]=t.t0;case 10:case"end":return t.stop()}},t,null,[[0,6]])}));return function(){return t.apply(this,arguments)}}(),u=function(){var t=Object(C.a)(N.a.mark(function t(a){return N.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.validateAt(a,n);case 3:delete r[a],t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),r[a]=t.t0;case 9:case"end":return t.stop()}},t,null,[[0,6]])}));return function(e){return t.apply(this,arguments)}}(),m=function(e,t,r){return function(){var i=Object(C.a)(N.a.mark(function i(m){var d,h,p,f,g,v,b;return N.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(d=m.target&&"change"==m.type?m.target.value:m,l(e,d),s.emit("change",n),!t&&!a.validateOnChange){i.next=40;break}if(o[e]||(o[e]=!0),!r||!r.length){i.next=32;break}h=!0,p=!1,f=void 0,i.prev=9,g=r[Symbol.iterator]();case 11:if(h=(v=g.next()).done){i.next=18;break}return b=v.value,i.next=15,u(b);case 15:h=!0,i.next=11;break;case 18:i.next=24;break;case 20:i.prev=20,i.t0=i.catch(9),p=!0,f=i.t0;case 24:i.prev=24,i.prev=25,h||null==g.return||g.return();case 27:if(i.prev=27,!p){i.next=30;break}throw f;case 30:return i.finish(27);case 31:return i.finish(24);case 32:if(!a||!a.validateAll){i.next=37;break}return i.next=35,c();case 35:i.next=39;break;case 37:return i.next=39,u(e);case 39:s.emit("change",n);case 40:case"end":return i.stop()}},i,null,[[9,20,24,32],[25,,27,31]])}));return function(e){return i.apply(this,arguments)}}()},d=function(t){return function(){var a=Object(C.a)(N.a.mark(function a(i){return N.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return o[t]||(o[t]=!0),a.prev=1,a.next=4,e.validateAt(t,n);case 4:delete r[t],a.next=10;break;case 7:a.prev=7,a.t0=a.catch(1),r[t]=a.t0;case 10:s.emit("change",n);case 11:case"end":return a.stop()}},a,null,[[1,7]])}));return function(e){return a.apply(this,arguments)}}()};return{setSchema:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=t},on:s.on,validateData:function(){var e=Object(C.a)(N.a.mark(function e(){return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c();case 2:s.emit("change",n);case 3:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),getInvalidPaths:function(){return Object.keys(r)},getErrorPath:function(e){return o[e]?Object(L.a)({},r[e]):null},getData:function(){return Object(L.a)({},n)},updatePathData:function(){var e=Object(C.a)(N.a.mark(function e(t,a){return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l(t,a),e.next=3,u(t);case 3:s.emit("change",n);case 4:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),resetData:function(){var e=Object(C.a)(N.a.mark(function e(){var t,r=arguments;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{},n=Object.assign({},t,a.initData),e.next=4,c();case 4:o={},s.emit("change",n);case 6:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),setInitData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a=Object.assign({},a,{initData:e})},updateData:function(){var e=Object(C.a)(N.a.mark(function e(t){return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object.assign({},n,t),e.next=3,c();case 3:s.emit("change",n);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),isValid:function(){return 0===Object.keys(r).length},getPathData:i,enhancedInput:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{value:i(e),onChange:m(e,t),onBlur:d(e)}},enhancedComponent:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return t({value:i(e),onChange:m(e,a,n),onBlur:d(e),error:o[e]?r[e]:null,onEnter:function(e){q(e)&&s.emit("enter")}})}}},Y=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.className,a=e.error,n=void 0!==a&&a,o=e.success,s=void 0!==o&&o,i=e.label,l=void 0===i?null:i,c=e.helper,u=void 0===c?null:c,m=e.id,d=e.icon,h=e.inputType,p=void 0===h?"input":h,f=Object(D.a)(e,["className","error","success","label","helper","id","icon","inputType"]),g=null;switch(p){case"input":g=r.a.createElement("input",Object.assign({type:"text",className:E()("form-control",{"is-invalid":n,"is-valid":s}),id:m},f));break;case"text-area":g=r.a.createElement("textarea",Object.assign({type:"text",className:E()("form-control",{"is-invalid":n,"is-valid":s}),id:m},f));break;default:g=r.a.createElement("input",Object.assign({type:"text",className:E()("form-control",{"is-invalid":n,"is-valid":s}),id:m},f))}return d&&(g=r.a.createElement("div",{className:"input-with-icon"},g,r.a.createElement("span",{className:"input-icon"},r.a.createElement("span",null,d)))),r.a.createElement("div",{className:E()("form-group",t,{"has-error":n})},l&&r.a.createElement("label",{className:"input-base-label",htmlFor:m},l),g,n&&r.a.createElement("div",Object.assign({className:"input-base-feedback",id:m},f),n.message),u&&r.a.createElement("div",Object.assign({className:"input-base-help ",id:m},f),u))}}]),t}(n.Component);function K(e){var t=e.className;return r.a.createElement("div",{className:"loading-inline"},r.a.createElement("div",{className:"overlay row justify-content-center align-items-center"},r.a.createElement("i",{className:E()("fa fa-circle-notch spin-icon spin",t)})))}var J=a(201),Z=a.n(J),X=a(202),$=function(e){return r.a.createElement("button",{className:"btn btn-facebook-share btn-social-packed",style:{marginRight:e.marginRight?"".concat(e.marginRight,"px"):"",height:e.height?"".concat(e.height,"px"):""},onClick:e.onClick},r.a.createElement("span",{className:"fb-icon social-icon"},r.a.createElement("i",{className:"fab fa-facebook-f"})),r.a.createElement("span",{className:"btn-text",style:{fontSize:e.marginRight?"".concat(e.fontSize,"px"):"",width:"calc(100% - 50px)"}},e.text))},ee=function(e){return r.a.createElement("button",{className:"btn btn-pinterest-share btn-social-packed",onClick:e.onClick,style:{marginRight:e.marginRight?"".concat(e.marginRight,"px"):"",height:e.height?"".concat(e.height,"px"):""}},r.a.createElement("span",{className:"fb-icon social-icon"},r.a.createElement("i",{className:"fab fa-pinterest"})),r.a.createElement("span",{className:"btn-text",style:{fontSize:e.marginRight?"".concat(e.fontSize,"px"):"",width:"calc(100% - 50px)"}},e.text))},te=function(e){return r.a.createElement("button",{className:"btn btn-facebook-login btn-social",onClick:e.onClick},r.a.createElement("span",{className:"fb-icon social-icon"},r.a.createElement("i",{className:"fab fa-facebook-square"})),r.a.createElement("span",{className:"line"}),r.a.createElement("span",{className:"btn-text"},e.text))},ae=function(e){return r.a.createElement("button",{className:"btn btn-google-login btn-social",onClick:e.onClick},r.a.createElement("span",{className:"google-icon social-icon"},r.a.createElement("i",{className:"fab fa-google-plus-square"})),r.a.createElement("span",{className:"line"}),r.a.createElement("span",{className:"btn-text"},e.text))},ne=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).handleFacebookResponse=function(e){a.props.onResponse(e,"facebook")},a.handleGoogleResponse=function(e){a.props.onResponse(e,"google")},a.state={},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:E()("login-social-container",this.props.className)},r.a.createElement(Z.a,{appId:"2158998807742962",autoLoad:!1,fields:"name,email,picture",scope:"public_profile, email",onClick:function(){return e.props.handleClickSocialBtn()},callback:this.handleFacebookResponse,render:function(e){return r.a.createElement(te,{onClick:e.onClick,text:"Facebook"})}}),r.a.createElement(X.GoogleLogin,{clientId:"315323914416-kboqkv3ehemndnke8cumdbcbfqmvqa2d.apps.googleusercontent.com",scope:"https://www.googleapis.com/auth/user.birthday.read",hello:"test",render:function(e){return r.a.createElement(ae,{onClick:function(){e.onClick()},text:"Google"})},onSuccess:this.handleGoogleResponse,cookiePolicy:"single_host_origin",onFailure:this.handleGoogleResponse}))}}]),t}(n.Component),re=function e(){var t=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:localStorage;Object(l.a)(this,e),this.engine=null,this.get=function(e){var a,n=t.engine.getItem(e);if(null==n)return null;try{a=JSON.parse(n)}catch(r){console.log("[CACHE] Error:",r),a=null}return a},this.set=function(e,a){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null==e)t.engine.removeItem(a);else try{t.engine.setItem(a,JSON.stringify(e),n)}catch(r){}},this.engine=a},oe=a(94),se=a.n(oe);var ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e},a=e,n=[];return{getState:function(){return a},setState:function(e){var r=a;return a=t(e),Promise.all(n.map(function(e){return e(a,r)}))},onChange:function(e){return n.push(e),function(){var t=n.indexOf(e);n.splice(t,1)}}}}(),le={getItem:se.a.get,setItem:se.a.set,removeItem:se.a.remove},ce=function(){var e=new re(le);return{clearAuthen:function(){e.set(null,"authen-token")},loadAuthen:function(){return new Promise(function(t,a){e.get("authen-token")?me.get().then(function(e){if(e.data){var n=R()(e.data,["password","createdAt","updatedAt","active"]);ie.setState(n),t(ie.getState())}else a()}).catch(function(e){return a()}):a()})},getAuthen:function(){return e.get("authen-token")},setAuthen:function(t,a){e.set(t,"authen-token",a)}}}(),ue=new function e(t){var a=this,n=t.url,r=t.onErrors;Object(l.a)(this,e),this.addHeader=function(e,t){a.headers[e]=t},this.get=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return a.instance.get(e,t)},this.delete=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return a.instance.delete(e,t)},this.post=function(e,t,n){return a.instance.post(e,t,n)},this.put=function(e,t,n){return a.instance.put(e,t,n)},this.instance=I.a.create({baseURL:n}),this.headers={},this.instance.interceptors.request.use(function(e){return Object.keys(a.headers).map(function(t){var n="function"===typeof a.headers[t]?a.headers[t]():a.headers[t];return n&&(e.headers[t]=n),t}),e}),this.instance.interceptors.response.use(function(e){return e},function(e){var t=null;return console.log(e),console.log(e.message),e.response?(r.hasOwnProperty(e.response.data.message)&&r[e.response.data.message](),t=new Error(e.response.data.message)):t=new Error(e.message.toString().toLowerCase().replace(" ","_")),Promise.reject(t)})}({url:"https://meme-server.onrender.com/api",onErrors:{token_expired:function(){console.log("token_expired"),ce.clearAuthen()},account_not_found:function(){console.log("account_not_found"),ce.clearAuthen()},require_login:function(){console.log("require_login"),ce.clearAuthen()}}}),me={post:function(e){return ue.post("/auth",e)},get:function(){return ue.get("/auth")},postSocial:function(e){return ue.post("/auth/social",e)}},de=a(6),he=de.object().shape({email:de.string().email("Please input a valid email.").required("Email must not be empty"),password:de.string().min(6,"Password must be at least 6-char long.").required("Password must not be empty")}),pe=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).handleLogin=function(){var e=a.form.getData(),t=e.email,n=e.password;a.setState({loading:!0}),me.post({email:t,password:n}).then(function(e){ce.setAuthen(e.data.token,{expire:1}),ie.setState(e.data.user).then(function(){console.log("[USER_STATE]",ie),a.props.onLoginSuccess()})}).catch(function(e){return a.setState({loading:!1,error:e})})},a.socialStrategies={google:{isValid:function(e){return e.hasOwnProperty("googleId")&&e.googleId},getData:function(e){var t=e.profileObj,a=t.email,n=t.name,r=t.imageUrl,o=t.googleId;return{email:a,name:n,avatarURL:r,accessToken:e.accessToken,social:{id:o,type:"GOOGLE"}}},getBirthday:function(e,t){return I.a.get("https://people.googleapis.com/v1/people/".concat(t,"?personFields=birthdays"),{headers:{Authorization:"Bearer "+e}}).then(function(e){if(e&&e.data){console.log(e.data.birthdays[0].date);var t=e.data.birthdays[0].date,a=t.year,n=t.month,r=t.day;return{birthday:a&&n&&r?new Date(a,n-1,r).toISOString():null}}})},errorMsg:"gg_login_failed"},facebook:{isValid:function(e){return e.hasOwnProperty("userID")&&e.userID},getData:function(e){console.log(e);var t=e.email,a=e.name,n=e.picture,r=e.userID,o=e.birthday;return{email:t,name:a,avatarURL:n.data.url,birthday:o?new Date(o).toISOString():null,social:{id:r,type:"FACEBOOK"}}},errorMsg:"fb_login_failed"}},a.handleSocialResponse=function(){var e=Object(C.a)(N.a.mark(function e(t,n){var r,o,s,i,l,c,u;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a.socialStrategies[n],o=r.isValid,s=r.getData,i=r.errorMsg,o(t)){e.next=7;break}console.log(n,t),a.setState({error:i,loading:!1}),e.next=24;break;case 7:if(l=s(t),c=l,u=null,"google"!==n){e.next=22;break}return e.prev=11,e.next=14,r.getBirthday(l.accessToken,l.social.id);case 14:u=e.sent,e.next=20;break;case 17:e.prev=17,e.t0=e.catch(11),a.setState({error:e.t0,loading:!1});case 20:(c=R()(l,"accessToken")).birthday=u.birthday;case 22:console.log(c),me.postSocial(c).then(function(e){console.log(e),ce.setAuthen(e.data.token,{expire:1}),ie.setState(e.data.user).then(function(){console.log("[USER_STATE]",ie),a.props.onLoginSuccess()})}).catch(function(e){console.log(e),a.setState({error:e,loading:!1})});case 24:case"end":return e.stop()}},e,null,[[11,17]])}));return function(t,a){return e.apply(this,arguments)}}(),a.handleServerError=function(){var e=a.state.error,t=a.form.getData().email,n=e.message,r={account_not_found:"User is not registered yet.",network_error:"Database is ded",wrong_password:"Password is invalid.",gg_taken:"Email: ".concat(t," has been linked to Google"),fb_taken:"Email: ".concat(t," has been linked to Facebook")};return r.hasOwnProperty(n)?r[n]:"Something bad happened."},a.state={loading:!1,error:null},a.form=Q(he,{initData:{email:"",password:""}}),a.onUnmount(a.form.on("change",function(){return a.forceUpdate()})),a.onUnmount(a.form.on("enter",function(){return a.handleLogin()})),a.form.validateData(),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props.onClose,a=this.form.isValid()&&!this.state.loading,n=this.form.enhancedComponent("email",function(e){var t=e.error,a=e.onChange,n=e.onEnter,o=Object(D.a)(e,["error","onChange","onEnter"]);return r.a.createElement(Y,Object.assign({autoFocus:!0,className:"login-modal-input",error:t,id:"email",onChange:function(e){a(e)},label:"Email",type:"email",placeholder:"abc@xyz.com",onKeyDown:n},o))},!0),o=this.form.enhancedComponent("password",function(e){var t=e.error,a=e.onChange,n=e.onEnter,o=Object(D.a)(e,["error","onChange","onEnter"]);return r.a.createElement(Y,Object.assign({className:"login-modal-input",error:t,id:"password",onChange:function(e){a(e)},label:"Password",type:"password",onKeyDown:n},o))},!0);return r.a.createElement("div",{className:"login-modal"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("div",{className:"modal-title login-modal-header"},r.a.createElement("h2",{className:"login-modal-title"},"Login"),r.a.createElement("p",{className:"login-modal-subtitle"},"Connect with a social network"),r.a.createElement(ne,{handleClickSocialBtn:function(){return e.setState({loading:!0})},onResponse:this.handleSocialResponse})),r.a.createElement("i",{className:"fas fa-times close-modal login-close-button",onClick:function(){return t()}})),r.a.createElement("div",{className:"modal-body"},r.a.createElement("p",{className:"login-modal-subtitle"},"Log in with your email address"),this.state.error&&r.a.createElement("div",{className:"server-error"},this.handleServerError()),n,o,this.state.loading?r.a.createElement(K,null):null),r.a.createElement("div",{className:"modal-footer justify-content-between login-modal-footer"},r.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:function(){e.handleLogin()},disabled:!a},"Log in"),r.a.createElement(i.b,{className:"login-modal-footer-link",to:"/forgot-password",onClick:function(){return t()}},"Forgot password")))}}]),t}(F),fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=w.openModal({content:r.a.createElement(pe,{onClose:function(){return t.close()},onLoginSuccess:function(){t.close(),e&&e(),console.log(ie.getState())}})});return t.result},ge=a(22),ve=a.n(ge),be=de.object().shape({username:de.string().min(3,"Username must be at least 3-char long.").max(50,"Username should not have more than 50 characters").required("Username must not be empty"),email:de.string().email("Please input a valid email.").required("Email must not be empty"),password:de.string().min(6,"Password must be at least 6-char long.").required("Password must not be empty")}),Ee={get:function(e){return ue.get("/users/"+e)},post:function(e){return ue.post("/users",e)},put:function(e,t){return ue.put("/users/"+e,t)},delete:function(e){return ue.delete("/users/"+e)},checkEmail:function(e){return ue.post("/users/check-email",e)},checkUsername:function(e){return ue.post("users/check-username",e)},postForgotPassword:function(e){return ue.post("/users/forgot-password",e)},postUpdatePassword:function(e){return ue.post("/users/update-password",e)},getVerifyUser:function(e){return ue.get("/users/verify/"+e)},putChangePassword:function(e){return ue.put("/users/change-password",e)},updateAccount:function(e){return ue.put("users/update-account",e)},updateProfile:function(e){return ue.put("users/update-profile",e)}},ye={INITIAL:"initial",SIGNUP:"signup"},Ae=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).checkEmailExisted=function(e){a.setState({loading:!0}),Ee.checkEmail({email:e}).then(function(e){console.log(e),"account_not_found"===e.data.message?a.setState({error:"",checking:!1,loading:!1,validated:!0}):"account_found"===e.data.message?a.setState({error:{message:"account_found"},checking:!1,loading:!1,validated:!1}):a.setState({error:{message:"bad_error"},checking:!1,loading:!1,validated:!1})}).catch(function(e){a.setState({error:e,checking:!1,loading:!1,validated:!1})})},a.debounceCheckEmailExisted=ve()(a.checkEmailExisted,1500),a.handleChange=function(e){a.state.checking||a.setState({checking:!0}),a.setState({error:"",email:e}),be.isValidSync({username:"testonly",email:e,password:"testonly"})?(a.debounceCheckEmailExisted(e),console.log("Start querying")):a.setState({loading:!1})},a.prepareRegisterForm=function(){a.setState({modalType:ye.SIGNUP}),a.form=Q(be,{initData:{username:"",email:"",password:""}}),a.onUnmount(a.form.on("change",function(){return a.forceUpdate()})),a.onUnmount(a.form.on("enter",function(){return a.handleLogin()})),a.form.validateData()},a.handleRegister=function(){var e=a.form.getData(),t=e.username,n=e.email,r=e.password;a.setState({loadingRegister:!0}),Ee.post({name:t,email:n,password:r}).then(function(e){ce.setAuthen(e.data.token,{expire:1}),ie.setState(e.data.user).then(function(){a.props.onRegisterSuccess()})}).catch(function(e){return a.setState({loadingRegister:!1,error:e})})},a.socialStrategies={google:{isValid:function(e){return e.hasOwnProperty("googleId")&&e.googleId},getData:function(e){var t=e.profileObj,a=t.email,n=t.name,r=t.imageUrl,o=t.googleId;return{email:a,name:n,avatarURL:r,accessToken:e.accessToken,social:{id:o,type:"GOOGLE"}}},getBirthday:function(e,t){return I.a.get("https://people.googleapis.com/v1/people/".concat(t,"?personFields=birthdays"),{headers:{Authorization:"Bearer "+e}}).then(function(e){if(e&&e.data){console.log(e.data.birthdays[0].date);var t=e.data.birthdays[0].date,a=t.year,n=t.month,r=t.day;return{birthday:a&&n&&r?new Date(a,n-1,r).toISOString():null}}})},errorMsg:"gg_login_failed"},facebook:{isValid:function(e){return e.hasOwnProperty("userID")&&e.userID},getData:function(e){var t=e.email,a=e.name,n=e.picture,r=e.userID,o=e.birthday;return{email:t,name:a,avatarURL:n.data.url,birthday:o?new Date(o).toISOString():null,social:{id:r,type:"FACEBOOK"}}},errorMsg:"fb_login_failed"}},a.handleSocialResponse=function(){var e=Object(C.a)(N.a.mark(function e(t,n){var r,o,s,i,l,c,u;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(n,t),r=a.socialStrategies[n],o=r.isValid,s=r.getData,i=r.errorMsg,o(t)){e.next=7;break}a.setState({error:i,loading:!1}),e.next=24;break;case 7:if(l=s(t),c=l,u=null,"google"!==n){e.next=22;break}return e.prev=11,e.next=14,r.getBirthday(l.accessToken,l.social.id);case 14:u=e.sent,e.next=20;break;case 17:e.prev=17,e.t0=e.catch(11),a.setState({error:e.t0,loading:!1});case 20:(c=R()(l,"accessToken")).birthday=u.birthday;case 22:console.log("[SEND_DATA_REGISTER]",c),me.postSocial(c).then(function(e){console.log(e),ce.setAuthen(e.data.token,{expire:1}),ie.setState(e.data.user).then(function(){a.props.onRegisterSuccess()})}).catch(function(e){return a.setState({error:e,loading:!1})});case 24:case"end":return e.stop()}},e,null,[[11,17]])}));return function(t,a){return e.apply(this,arguments)}}(),a.handleServerError=function(){var e=a.state.error.message,t={account_found:"This email has been used for another user.",network_error:"Database is ded."};return t.hasOwnProperty(e)?t[e]:"Something bad happened."},a.state={modalType:ye.INITIAL,checking:!1,validated:!1,loading:!1,loadingRegister:!1,error:null},a.form=null,a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props.onClose,a=this.state,o=a.modalType,s=a.loading,i=a.loadingRegister,l=a.validated,c=o===ye.SIGNUP,u=!1;c&&(u=l&&!s&&0===this.form.getInvalidPaths().length);var m=r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"modal-header"},r.a.createElement("div",{className:"modal-title register-modal-header"},r.a.createElement("h2",{className:"register-modal-title"},"Hey there!"),r.a.createElement("p",{className:"register-modal-subtitle"},"9GAG is your best source for fun. Share anything you find interesting, get real responses from people all over the world, and discover what makes you laugh."),r.a.createElement(ne,{className:"mb-2",handleClickSocialBtn:function(){return e.setState({loading:!0})},onResponse:this.handleSocialResponse})),r.a.createElement("i",{className:"fas fa-times close-modal register-close-button",onClick:function(){return t()}})),r.a.createElement("div",{className:"modal-footer register-modal-footer"},r.a.createElement("p",{className:"register-modal-subtitle"},"Sign up with your"," ",r.a.createElement("span",{className:"register-text-link",onClick:function(){e.prepareRegisterForm()}},"Email Address")),r.a.createElement("p",{className:"register-modal-subtitle"},"Have an account?"," ",r.a.createElement("span",{className:"register-text-link",onClick:function(){t(),fe(e.props.handleLogin)}},"Login")))),d=c?r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"modal-header"},r.a.createElement("div",{className:"modal-title register-modal-header"},r.a.createElement("h2",{className:"register-modal-title"},"Become a member")),r.a.createElement("i",{className:"fas fa-times close-modal register-close-button",onClick:function(){return t()}})),r.a.createElement("div",{className:"modal-body"},this.form.enhancedComponent("username",function(e){var t=e.error,a=e.onChange,n=(e.onEnter,Object(D.a)(e,["error","onChange","onEnter"]));return r.a.createElement(Y,Object.assign({className:"login-modal-input",error:t,id:"username",onChange:function(e){a(e)},label:"Username",type:"text"},n))},!0),this.form.enhancedComponent("email",function(t){var a=t.error,n=t.onChange,o=(t.onEnter,Object(D.a)(t,["error","onChange","onEnter"]));return r.a.createElement(Y,Object.assign({className:"forgot-password-input",error:a,success:e.state.validated,id:"email",onChange:function(t){var a=t.target.value;n(t),e.handleChange(a)},type:"email",label:"Your email address",placeholder:"name@email.com",icon:e.state.loading?r.a.createElement("i",{className:"fas fa-spinner spin"}):null},o))},!0),this.form.enhancedComponent("password",function(e){var t=e.error,a=e.onChange,n=e.onEnter,o=Object(D.a)(e,["error","onChange","onEnter"]);return r.a.createElement(Y,Object.assign({className:"login-modal-input",error:t,id:"password",onChange:function(e){a(e)},label:"Password",type:"password",onKeyDown:n},o))},!0),this.state.error&&r.a.createElement("div",{className:"server-error"},this.handleServerError()),i?r.a.createElement(K,null):null),r.a.createElement("div",{className:"modal-footer justify-content-between register-modal-footer"},r.a.createElement("button",{type:"button",className:"btn btn-primary",disabled:!u,onClick:function(){e.handleRegister()}},"Register"))):null;return r.a.createElement("div",{className:E()("register-modal")},c?d:m)}}]),t}(F),we={open:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=w.openModal({content:r.a.createElement(Ae,{onClose:function(){return a.close()},handleLogin:t,onRegisterSuccess:function(){a.close(),e(),console.log(ie.getState())}})});return a.result}},ke=function(e){return r.a.createElement("div",{className:"visitor-function"},r.a.createElement("button",{id:"login-btn",className:"my-btn-mute",onClick:function(){fe()}},"Login"),r.a.createElement("button",{id:"signup-btn",className:"my-btn-primary",onClick:function(){console.log(e),we.open(function(){return e.history.push("/")})}},"Sign up"))},Ne={checkImageSize:function(e){return ue.post("/util/image-size",{url:e})},checkImageFile:function(e){return ue.post("/util/image-size",e,{headers:{"Content-Type":"multipart/form-data"}})},getCommentPreview:function(e){return ue.post("/util/comment-preview",e,{headers:{"Content-Type":"multipart/form-data"}})},getMetaTags:function(e){return ue.post("/util/get-url",{url:e})}},Ce=function(e){return Ne.getMetaTags(e).then(function(e){if(200===e.status)return e.data;var t=new Error("scrapper_failed");throw t.statusCode=400,t}).catch(function(e){throw e})},Se=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).updateWindowDimensions=function(){a.setState({width:window.innerWidth,height:window.innerHeight})},a.state={height:e.height,width:e.width},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.updateWindowDimensions(),window.addEventListener("resize",this.updateWindowDimensions)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateWindowDimensions)}},{key:"render",value:function(){var e=this.props,t=e.onDismiss,a=e.type,n=e.src;return r.a.createElement("div",{className:E()("focused-image",this.props.hidden?"focused-image-hidden":""),onClick:t},r.a.createElement("div",{className:"image-overlay",onClick:t},r.a.createElement("div",{className:"close-button"},r.a.createElement("i",{className:"fas fa-times close-modal",onClick:t})),r.a.createElement("div",{className:"image-content",onClick:t},"Photo"===a?r.a.createElement("img",{className:E()(this.state.width<780?"img-hidden":null),src:n||"https://i.imgur.com/Piw0UWw.jpg?fb",alt:"Focused One",onClick:t}):r.a.createElement("video",{className:E()(this.state.width<780?"img-hidden":null),src:n||"https://i.imgur.com/miLScZY.mp4",alt:"Focused One",autoPlay:!0,loop:!0,muted:!0}))))}}]),t}(n.Component),Oe=a(203),je=a.n(Oe),xe=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={data:a.props.data,currentSection:a.props.defaultSection?a.props.defaultSection:null},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.className,n=t.handleClick,o=this.state,s=o.data,i=o.currentSection;return r.a.createElement("div",{className:E()("section-picker",a)},r.a.createElement("ul",{className:"section-list"},s.map(function(t){return r.a.createElement("li",{key:t.name,className:"section"},r.a.createElement("div",{className:"section-container",style:{height:t.imageUrl?"":"20px"},onClick:function(){n(t),e.setState({currentSection:t})}},t.imageUrl?r.a.createElement("img",{className:"section-icon",src:t.imageUrl,alt:"icon"}):null,r.a.createElement("div",{className:"section-text",style:{margin:t.imageUrl?"":"0px"}},r.a.createElement("h3",{className:"section-title",style:{fontWeight:t.imageUrl?"":"bold"}},t.name),t.description?r.a.createElement("p",{className:"section-subtitle"},t.description):null),i!==t?r.a.createElement("div",{className:"section-selector"}):r.a.createElement("img",{className:"section-selector selected",src:je.a,alt:"Checkbox"})))})))}}]),t}(n.Component),Pe=function(e){var t=null;return{get:function(){var a=Object(C.a)(N.a.mark(function a(){return N.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(t){a.next=7;break}return a.next=3,e();case 3:return t=a.sent,a.abrupt("return",t);case 7:return a.abrupt("return",t);case 8:case"end":return a.stop()}},a)}));return function(){return a.apply(this,arguments)}}(),modifyCache:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t=e},syncGet:function(){return t}}},De=function(){return ue.get("/categories")},Ue=function(){return ue.get("/countries")},Re=function(){return ue.get("/status")},Ve=Pe(function(){return De().then(function(e){return 200===e.status?e.data?e.data.data:e.data:[]})}),Ie=Pe(function(){return Re().then(function(e){return 200===e.status?e.data?e.data.data:e.data:[]})}),Fe=Pe(function(){return Ue().then(function(e){return 200===e.status?e.data?e.data.data:e.data:[]})}),Le={getPost:function(e){return ue.get("/posts/"+e)},getPosts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return ue.get("/posts"+(null!=e?"/?page="+e:"")).then(function(e){return e.data}).catch(function(e){return e})},postPost:function(e){return ue.post("/posts",e,{headers:{"Content-Type":"multipart/form-data"}})},putPost:function(e,t){return ue.put("/posts/"+e,t,{headers:{"Content-Type":"multipart/form-data"}})},deletePost:function(e){return ue.delete("/posts/"+e)},updateVotePost:function(e,t){return ue.put("/posts/"+e+"/votes",{upvote:t})},updateVoteComment:function(e,t,a){return ue.put("/posts/"+e+"/comments/"+t+"/votes",{upvote:a})},updateVoteReply:function(e,t,a,n){return ue.put("/posts/"+e+"/comments/"+t+"/subcomments/"+a+"/votes",{upvote:n})},getComment:function(e,t){return ue.get("/posts/"+e+"/comments/"+t)},getComments:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"hot";return ue.get("/posts/"+e+"/comments?query=".concat(t))},postComment:function(e,t){return ue.post("/posts/"+e+"/comments",t,{headers:{"Content-Type":"multipart/form-data"}})},putComment:function(e,t,a){return ue.put("/posts/"+e+"/comments/"+t,a,{headers:{"Content-Type":"multipart/form-data"}})},deleteComment:function(e,t){return ue.delete("/posts/"+e+"/comments/"+t)},getSubcomments:function(e,t){return ue.get("/posts/"+e+"/comments/"+t+"/subcomments")},getSubcomment:function(e,t,a){return ue.get("/posts/"+e+"/comments/"+t+"/subcomments/"+a)},postSubcomment:function(e,t,a){return ue.post("/posts/"+e+"/comments/"+t+"/subcomments",a,{headers:{"Content-Type":"multipart/form-data"}})},putSubcomment:function(e,t,a,n){return ue.post("/posts/"+e+"/comments/"+t+"/subcomments/"+a,n,{headers:{"Content-Type":"multipart/form-data"}})},deleteSubcomment:function(e,t,a){return ue.delete("/posts/"+e+"/comments/"+t+"/subcomments/"+a)}},Me=function(e){function t(e){var a;Object(l.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).handleServerError=function(){var e=a.state.error.message,t={invalid_url:"Invalid URL.",invalid_picture:"Unsupported image",network_error:"Database is ded."};return t.hasOwnProperty(e)?t[e]:"Something bad happened."},a.handleSectionClick=function(e){a.setState({currentCategory:e})},a.handleBackClicked=function(){a.props.onClose();var e=Object(L.a)({},a.props.data);e.category=a.state.currentCategory,Be.open(a.props.onUploadSuccess,{type:a.props.data.type,src:a.props.data.url},a.props.data.file,!0,e)},a.handlePost=function(){var e=Object(L.a)({},a.props.data);e.category=a.state.currentCategory._id,console.log("[SEND_DATA]:",e);var t=new FormData;t.append("title",e.title),t.append("category",e.category),t.append("tags",JSON.stringify(e.tags)),t.append("url",e.file?"":e.url),t.append("type",e.type),t.append("file",e.file?e.file.file:null),t.append("attributeLink",e.attributeLink),t.append("nsfw",e.nsfw),a.setState({loading:!0}),Le.postPost(t).then(function(e){console.log(e),a.props.onClose(),e.data&&e.data.data.redirect&&(a.setState({loading:!1}),a.props.onUploadSuccess(e.data.data.redirect))}).catch(function(e){a.setState({loading:!1,error:e})})},a.state={loading:!1,error:null,currentCategory:a.props.data?a.props.data.category:null};var n=Ve.syncGet(),r=ie.getState().homeCountry;return a.categoryData=n.filter(function(e){return!e.description.includes("Everything about")||!!e.name.includes(r.name)}),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props.onClose,a=this.state,o=a.loading,s=a.currentCategory;return r.a.createElement("div",{className:E()("selecting-category-modal")},r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"modal-header selecting-category-modal-header no-border"},r.a.createElement("div",{className:"modal-title "},r.a.createElement("h4",{className:"modal-title-text"},"Pick a section"),r.a.createElement("p",{className:"modal-subtitle-text"},"Submitting to the right section to make sure your post gets the right exposure it deserves!")),r.a.createElement("i",{className:"fas fa-times close-modal",onClick:function(){return t()}})),r.a.createElement("div",{className:"modal-body selecting-category-modal-body"},o?r.a.createElement(K,null):null,r.a.createElement(xe,{data:this.categoryData,handleClick:this.handleSectionClick,defaultSection:s}),this.state.error&&r.a.createElement("div",{className:"server-error"},this.handleServerError())),r.a.createElement("div",{className:"modal-footer selecting-category-modal-footer no-border"},r.a.createElement("button",{className:"btn btn-secondary",onClick:this.handleBackClicked},"Back"),r.a.createElement("button",{className:"btn btn-primary",disabled:null===s||this.state.loading,onClick:function(){return e.handlePost()}},o?"Loading":"Next"))))}}]),t}(F),Te=function(e,t){var a=w.openModal({content:r.a.createElement(Me,{onClose:function(){return a.close()},onUploadSuccess:function(t){a.close(),e(t)},data:t})});return a.result},_e=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).handleBackClicked=function(){a.props.onClose(),Ze.open(a.props.onPostSuccess)},a.handleServerError=function(){var e=a.state.error.message,t={network_error:"Database is ded.",invalid_tag:"Oops! Tags can contain alphanumerics, numbers and spaces only!",invalid_description:"Boost your post with a funny, creative and descriptive title!"};return t.hasOwnProperty(e)?t[e]:"Something bad happened."},a.handleTagInput=function(){var e=a.tagInputRef.value;if(a.tagArrays.length<=2){var t=e.slice(0,e.length);t.length>=1&&(/^[a-zA-Z0-9 ]+$/.test(t)?(a.tagArrays.push(t),a.tagInputRef.value="",a.forceUpdate()):a.setState({error:{message:"invalid_tag"}}))}},a.handleSpecialKey=function(e){"Enter"!==e.key&&","!==e.key||(e.preventDefault(),a.handleTagInput())},a.state={focusingImage:!1,error:null},a.charLeft=280,a.tagArrays=a.props.savedData?a.props.savedData.tags:[],a.descriptionRef=null,a.tagInputRef=null,a.sensitiveRef=null,a.attributeRef=null,a.attributeLinkRef=null,a.savedData=Object(L.a)({},a.props.savedData),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"validateBeforePost",value:function(){return!!this.descriptionRef&&(this.descriptionRef.value.length<=3?(this.setState({error:{message:"invalid_description"}}),!1):this.tagInputRef.value.length>=1?(this.handleTagInput(),!1):!this.state.error)}},{key:"handleNextButton",value:function(){var e=this.tagArrays?this.tagArrays.length:0,t=this.validateBeforePost();if(t||!t&&this.tagArrays.length>e){var a={title:this.descriptionRef.value,url:this.props.fromUrl?this.props.dataFromPreviousModal.src:this.props.file.src,type:this.props.dataFromPreviousModal.type,file:this.props.file,tags:this.tagArrays,nsfw:this.sensitiveRef.checked,attributeLink:this.attributeRef.checked?this.attributeLinkRef.value:"",category:this.props.savedData?this.props.savedData.category:null};console.log(a),this.props.onClose(),Te(this.props.onPostSuccess,a)}}},{key:"render",value:function(){var e=this,t=this.props,a=t.onClose,o=t.dataFromPreviousModal,s=this.state.focusingImage;return r.a.createElement("div",{className:E()("posting-post-modal",{"posting-post-modal-longer":!!this.state.error||this.attributeRef&&this.attributeRef.checked||!this.attributeRef&&this.savedData&&this.savedData.attributeLink})},r.a.createElement(Se,{hidden:!s,onDismiss:function(){return e.setState({focusingImage:!1})},type:o.type,src:o.src}),r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"modal-header posting-post-modal-header no-border"},r.a.createElement("div",{className:"modal-title "},r.a.createElement("h4",{className:"modal-title-text"},"Give your post a title"),r.a.createElement("p",{className:"modal-subtitle-text"},"An accurate, descriptive title can help people discover your post.")),r.a.createElement("i",{className:"fas fa-times close-modal register-close-button",onClick:function(){return a()}})),r.a.createElement("div",{className:"modal-body posting-post-modal-body"},this.state.error&&r.a.createElement("div",{className:"server-error pb-2"},this.handleServerError()),r.a.createElement("div",{className:"spacer"},r.a.createElement("div",{className:"field post-info"},r.a.createElement("div",{className:"preview",onClick:function(){return e.setState({focusingImage:!0})}},"Photo"===o.type?r.a.createElement("img",{src:o.src,alt:"Preview"}):r.a.createElement("video",{src:o.src,muted:!0})),r.a.createElement("textarea",{type:"text",className:"description",placeholder:"Describe your post...",minLength:"5",maxLength:"280",onChange:function(t){e.charLeft=280-+t.target.value.length,e.setState({error:null})},ref:function(t){return e.descriptionRef=t},defaultValue:this.savedData?this.savedData.title:""}),r.a.createElement("p",{className:"count"},this.charLeft)),r.a.createElement("div",{className:"field tag"},r.a.createElement("label",null,"Tag"),r.a.createElement("div",{className:"scroll-container"},r.a.createElement("div",{className:"tag-list"},this.tagArrays.map(function(t,a){return r.a.createElement("span",{key:t.toString()+a.toString(),className:"tag-item"},t,r.a.createElement("i",{className:"fas fa-times close-modal",onClick:function(){e.tagArrays.splice(a,1),e.forceUpdate()}}))})),r.a.createElement("input",{type:"text",placeholder:this.tagArrays.length<=0?"tag1, tag2, tag3":null,onChange:function(){e.setState({error:null})},onKeyDown:this.handleSpecialKey,disabled:this.tagArrays.length>=3,ref:function(t){return e.tagInputRef=t}}))),r.a.createElement("div",{className:"field checkbox"},r.a.createElement("label",null,r.a.createElement("p",null,"This is sensitive"),r.a.createElement("input",{type:"checkbox",ref:function(t){return e.sensitiveRef=t},defaultChecked:!!this.savedData&&this.savedData.nsfw}))),r.a.createElement("div",{className:E()("field checkbox",{last:!(null===this.attributeRef&&this.savedData&&this.savedData.attributeLink||this.attributeRef&&this.attributeRef.checked)})},r.a.createElement("label",null,r.a.createElement("p",null,"Attribute original poster"),r.a.createElement("input",{type:"checkbox",onChange:function(){e.forceUpdate()},ref:function(t){return e.attributeRef=t},defaultChecked:!!this.savedData&&!!this.savedData.attributeLink}))),null===this.attributeRef&&this.savedData&&this.savedData.attributeLink||this.attributeRef&&this.attributeRef.checked?r.a.createElement("div",{className:"field textbox last"},r.a.createElement("input",{type:"url",placeholder:"http://",ref:function(t){return e.attributeLinkRef=t},defaultValue:this.savedData?this.savedData.attributeLink:""})):null)),r.a.createElement("div",{className:"modal-footer posting-post-modal-footer no-border"},r.a.createElement("button",{className:"btn btn-secondary",onClick:function(){return e.handleBackClicked()}},"Back"),r.a.createElement("button",{className:"btn btn-primary",onClick:function(){return e.handleNextButton()}},"Next"))))}}]),t}(F),Be={open:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=w.openModal({content:r.a.createElement(_e,{onClose:function(){return s.close()},onPostSuccess:function(t){s.close(),e(t)},file:a,fromUrl:n,dataFromPreviousModal:t,savedData:o})});return s.result}},We=function(e){function t(e){var a;Object(l.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).handleServerError=function(){var e=a.state.error.message,t={invalid_url:"Invalid URL.",scrapper_failed:"Cannot extract image from this url.",invalid_picture:"Unsupported image",network_error:"Database is ded."};return t.hasOwnProperty(e)?t[e]:"Something bad happened."},a.handleFileChanged=function(){if(a.form.isValid()){var e=a.form.getData("url");console.log(e),new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(e.url)&&(a.setState({loading:!0}),Ce(e.url).then(function(e){if(console.log(e),e.error)throw new Error("invalid_url");var t=e.video,n=e.image,r=e.message,o={type:"",src:""};if("valid_picture"===r)o={type:"Photo",src:n.url},a.handleLoadSuccess(o);else if("valid_video"===r)o={type:"Animated",src:t.url},a.handleLoadSuccess(o);else{var s=new Error("bad_error");a.handleLoadFailed(s)}}).catch(function(e){a.handleLoadFailed(e)}))}},a.debounceCheckFileChanged=ve()(a.handleFileChanged,1e3),a.handleLoadSuccess=function(e){a.setState({loading:!1,error:null,validUrl:!0,validPic:!0}),a.props.onClose(),Be.open(a.props.onUploadSuccess,e,null,!0)},a.handleLoadFailed=function(e){a.setState({loading:!1,error:{message:"invalid_url"},validUrl:!1,validPic:!1})},a.handleBackClicked=function(){a.props.onClose(),Ze.open(a.props.onUploadSuccess,a.state.validUrl?a.form.getPathData("url"):"")},a.state={loading:!1,validUrl:!1,validPic:!1,error:null};var n=de.object().shape({url:de.string().url("This must be a valid links")});return a.form=Q(n,{initData:{url:a.props.url?a.props.url:""}}),a.onUnmount(a.form.on("change",function(){return a.forceUpdate()})),a.onUnmount(a.form.on("enter",function(){return a.handlePost()})),a.form.validateData(),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props.onClose,a=this.state,o=a.loading,s=a.validUrl,i=a.error,l=!o&&s&&null===i;return r.a.createElement("div",{className:E()("uploadurl-modal")},r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"modal-header uploadurl-modal-header no-border"},r.a.createElement("div",{className:"modal-title "},r.a.createElement("h4",{className:"modal-title-text"},"Upload from URL"),r.a.createElement("p",{className:"modal-subtitle-text"},"Type or paste Image URL")),r.a.createElement("i",{className:"fas fa-times close-modal register-close-button",onClick:function(){return t()}})),r.a.createElement("div",{className:"modal-body uploadurl-modal-body"},o?r.a.createElement(K,null):null,this.form.enhancedComponent("url",function(t){var a=t.error,n=t.onChange,o=(t.onEnter,Object(D.a)(t,["error","onChange","onEnter"]));return r.a.createElement(Y,Object.assign({className:"uploadurl-modal-input",error:a,id:"url",placeholder:"http://",onChange:function(t){n(t),e.setState({error:null}),e.debounceCheckFileChanged()},type:"url"},o))},!0)," ",this.state.error&&r.a.createElement("div",{className:"server-error"},this.handleServerError())),r.a.createElement("div",{className:"modal-footer uploadurl-modal-footer no-border"},r.a.createElement("button",{className:"btn btn-secondary",onClick:this.handleBackClicked},"Back"),r.a.createElement("button",{className:"btn btn-primary",disabled:!l},o?"Loading":"Next"))))}}]),t}(F),Ge={open:function(e,t){var a=w.openModal({content:r.a.createElement(We,{onClose:function(){return a.close()},onUploadSuccess:function(t){a.close(),e(t)},url:t})});return a.result}},He=a(27),ze=function(e){return new Promise(function(t){var a=new FileReader;a.readAsDataURL(e),a.onload=function(){t({file:e,src:a.result,fileID:e.lastModified})}})},qe=function(e){var t,a=Math.abs(e-Date.now()),n=Math.floor(a/1e3),r=Math.floor(a/6e4),o=Math.floor(r/60),s=Math.floor(o/24);return s<=0?o<=0?r<=0?"".concat(n,"s"):"".concat(r,"m"):"".concat(o,"h"):s<=30?"".concat(s,"d"):"".concat(e.getDate()," ").concat((t=3,["January","February","March","April","May","June","July","August","September","October","November","December"][0].substring(0,t)))},Qe=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).handleUpload=function(e){e.preventDefault();var t=Object(He.a)(e.target.files);if(e.target.value="",a.isMultiple){var n=function(){var e=a.props,n=e.value,o=e.onChange,s=e.onError,i=e.limit,l=void 0===i?2:i;if(t.length+n.length>=l)return s("Reach maximum amount of images ("+l+" files)!"),{v:void 0};for(var c=[],u=0;u<t.length;u++){var m=t[u];m&&m.type.indexOf("image")>-1&&c.push(ze(m).then(function(e){return n.find(function(t){return t.file.name===e.file.name})?(s(r.a.createElement("span",null,"Skip file"," ",r.a.createElement("span",{style:{color:"#189eff"}},e.file.namme)," ","because it has been uploaded.")),null):e}))}Promise.all(c).then(function(e){o(n.concat(e.filter(function(e){return null!==e})))})}();if("object"===typeof n)return n.v}else{var o=t[0];if(console.log(o),o&&o.type.indexOf("image")>-1){var s=a.props,i=s.value,l=s.onChange,c=s.onError;ze(o).then(function(e){return!i||i&&i.file.name!==e.file.name?e:(c(r.a.createElement("span",null,"File"," ",r.a.createElement("span",{style:{color:"#189eff"}},e.file.namme)," ","is the same as the one you uploaded.")),null)}).then(function(e){e&&l(e)})}else if(o&&o.type.indexOf("video")>-1){(0,a.props.onChange)({file:o,src:URL.createObjectURL(o)})}}},a.handleVideoUpload=function(e){},a.isMultiple=a.props.isMultiple,a.state={},a.inputElement=null,a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.renderBtn,o=t.onError,s=t.uploadImageOnly;return r.a.createElement(n.Fragment,null,a({onClick:function(t){e.inputElement.click(),o(null)}}),r.a.createElement("input",{className:"upload-input",type:"file",onChange:this.handleUpload,accept:s?"image/*":"image/*,video/*",style:{width:0,height:0},ref:function(t){return e.inputElement=t},multiple:this.isMultiple,name:"uploadBtn"}))}}]),t}(n.Component),Ye=a(204),Ke=a.n(Ye),Je=function(e){function t(e){var a;Object(l.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).handlePost=function(e){if(a.setState({error:null}),console.log(e),e.file&&e.file.type.indexOf("image")>-1){var t=new FormData;t.append("file",e.file),Ne.checkImageFile(t).then(function(t){console.log("[handle_post]",t),a.props.onClose(),Be.open(a.props.onUploadSuccess,{type:"Photo",src:t.data.data},e)}).catch(function(e){console.log(e),a.setState({error:e})})}else a.props.onClose(),Be.open(a.props.onUploadSuccess,{type:"Animated",src:e.src},e)},a.handleUploadFromUrl=function(){a.props.onClose(),Ge.open(a.props.onUploadSuccess,a.props.backupURL?a.props.backupURL:"")},a.handleServerError=function(){var e=a.state.error.message,t={invalid_picture:"Unsupported dimension",network_error:"Database is ded."};return t.hasOwnProperty(e)?t[e]:"Something bad happened."},a.state={loading:!1,uploadError:null,error:null};var n=de.object().shape({picture:de.mixed()});return a.form=Q(n,{initData:{}}),a.onUnmount(a.form.on("change",function(){return a.forceUpdate()})),a.onUnmount(a.form.on("enter",function(){return a.handlePost()})),a.form.validateData(),a.buttonOnClick=null,a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props.onClose;return r.a.createElement("div",{className:E()("upload-post-modal",{"upload-post-modal-longer":null!==this.state.error})},r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"modal-header upload-header"},r.a.createElement("div",{className:"modal-title upload-modal-header"},r.a.createElement("h4",{className:"modal-title-text"},"Upload a Post"),r.a.createElement("p",{className:"modal-subtitle-text"},"Choose how you want to upload the post")),r.a.createElement("i",{className:"fas fa-times close-modal register-close-button",onClick:function(){return t()}})),r.a.createElement("div",{className:"modal-body upload-modal-body"},this.state.error&&r.a.createElement("div",{className:"server-error"},this.handleServerError()),r.a.createElement("div",{className:"spacer"},r.a.createElement("div",{className:"upload-image",onClick:function(t){e.buttonOnClick()}},r.a.createElement("i",{className:"fas fa-file-upload upload-icon"}),r.a.createElement("p",{className:"upload-image-text"},"Drop image to upload or"),this.form.enhancedComponent("picture",function(t){t.error;var a=t.onChange,n=t.value;Object(D.a)(t,["error","onChange","value"]);return r.a.createElement(Qe,{renderBtn:function(t){var a=t.onClick;return e.buttonOnClick=a,r.a.createElement("button",{className:"btn btn-primary btn-bold-text"},"Choose file...")},onError:function(t){e.setState({uploadError:t})},onChange:function(t){a(t),e.handlePost(t)},value:n})})),r.a.createElement("div",{className:"other-source justify-content-center"},r.a.createElement("div",{className:"upload-image-url",onClick:this.handleUploadFromUrl},r.a.createElement("i",{className:"fas fa-image"}),r.a.createElement("p",null,"Paste image URL")),r.a.createElement("div",{className:"upload-image-url"},r.a.createElement("i",{className:"fas fa-play-circle"}),r.a.createElement("p",null,"Paste Video URL")),r.a.createElement("a",{href:"https://memeful.com/generator?ref=9gag",target:"_blank",rel:"noopener noreferrer",className:"upload-image-url"},r.a.createElement("img",{src:Ke.a,alt:"Trollface"}),r.a.createElement("p",null,"Make meme")))))))}}]),t}(F),Ze={open:function(e,t){var a=w.openModal({content:r.a.createElement(Je,{onClose:function(){return a.close()},onUploadSuccess:function(t){a.close(),e(t)},backupURL:t})});return a.result}},Xe=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{id:"header-avatar-dropdown",className:"popup-menu user"},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(i.b,{to:"#",onClick:function(){return console.log("hihdsifd")}},"My Profile")),r.a.createElement("li",null,r.a.createElement(i.b,{to:"/settings"},"Settings")),r.a.createElement("li",null,r.a.createElement(i.b,{to:"#",onClick:this.props.handleLogOut},"Logout"))))}}]),t}(r.a.Component),$e=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).setWrapperRef=a.setWrapperRef.bind(Object(j.a)(a)),a.handleClickOutside=a.handleClickOutside.bind(Object(j.a)(a)),a.handleToggleVisibility=a.handleToggleVisibility.bind(Object(j.a)(a)),a.state={visibility:!1},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"setWrapperRef",value:function(e){this.wrapperRef=e}},{key:"handleToggleVisibility",value:function(e){this.state.visibility?document.removeEventListener("click",this.handleClickOutside,!1):document.addEventListener("click",this.handleClickOutside,!1),this.setState(function(e){return{visibility:!e.visibility}})}},{key:"handleClickOutside",value:function(e){this.wrapperRef&&this.wrapperRef.contains(e.target)||this.handleToggleVisibility()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.handleClickOutside,!1)}},{key:"render",value:function(){var e=this,t=ie.getState().avatarURL;return r.a.createElement("div",{className:"user-function"},r.a.createElement("div",{className:"notification"},r.a.createElement("button",{className:"bell",to:"/"})),r.a.createElement("div",{className:"avatar"},r.a.createElement(i.b,{className:"avatar-container",onClick:this.handleToggleVisibility,to:"#"},r.a.createElement("img",{id:"avatar",src:t||"https://scontent.fhan2-1.fna.fbcdn.net/v/t1.0-9/65779034_2581715215269851_5487272615624048640_n.jpg?_nc_cat=103&_nc_oc=AQnHo4OFV2vph0EFQGpXEwFBgdxVAIRMQeDc9cqPCxokqfvcGFD6xW-PsK8IDU47JZA&_nc_ht=scontent.fhan2-1.fna&oh=dc220778d9eb228dc150dc2b3b701803&oe=5DB46B7B",alt:"avatar"}))),r.a.createElement("div",{className:"upload"},r.a.createElement("button",{id:"upload-btn",className:"my-btn-primary",onClick:function(){Ze.open(function(t){e.props.history.push(t)})}},"Upload")),this.state.visibility&&r.a.createElement(Xe,{handleLogOut:this.props.handleLogOut}))}}]),t}(r.a.Component),et=function(e){var t=ie.getState();return r.a.createElement("div",{className:"function-wrap"},r.a.createElement(P,null),!t&&r.a.createElement(ke,{history:e.history}),t&&r.a.createElement($e,{history:e.history,handleLogOut:e.handleLogOut}))},tt=function(e){return r.a.createElement("header",{className:"top-nav"},r.a.createElement("div",{className:"nav-wrap"},r.a.createElement(i.b,{className:"my-logo",to:"/"},"9GAG"),r.a.createElement("nav",{className:"nav-menu"},r.a.createElement(O,null)),r.a.createElement(et,{history:e.history,handleLogOut:e.handleLogOut})))},at=function(e){return r.a.createElement("div",{className:"more-dropdown"},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(i.b,{to:"#"},"Top Posts")),r.a.createElement("li",null,r.a.createElement(i.b,{to:"#"},"Most Recents"))))},nt=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).setWrapperRef=a.setWrapperRef.bind(Object(j.a)(a)),a.handleClickOutside=a.handleClickOutside.bind(Object(j.a)(a)),a.handleToggleVisibility=a.handleToggleVisibility.bind(Object(j.a)(a)),a.state={name:"",visibility:!1},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"setWrapperRef",value:function(e){this.wrapperRef=e}},{key:"handleToggleVisibility",value:function(e){this.state.visibility?document.removeEventListener("click",this.handleClickOutside,!1):document.addEventListener("click",this.handleClickOutside,!1),this.setState(function(e){return{visibility:!e.visibility}})}},{key:"handleClickOutside",value:function(e){this.wrapperRef&&this.wrapperRef.contains(e.target)||this.handleToggleVisibility()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"popular"},r.a.createElement("header",null,r.a.createElement("h3",null,"Popular")),r.a.createElement("ul",{className:"nav"},r.a.createElement("li",{className:"hot"===this.state.name?"selected":""},r.a.createElement("div",{className:"div-button",onClick:function(){e.setState({name:"hot"})}},r.a.createElement(i.b,{to:"#",className:"label"},r.a.createElement("i",{className:"icon hot"}),"Hot"),r.a.createElement("button",{className:"my-button",onClick:this.handleToggleVisibility},r.a.createElement("i",{className:"icon icon-right more"}))),this.state.visibility&&r.a.createElement(at,null)),r.a.createElement("li",{className:"trending"===this.state.name?"selected":""},r.a.createElement("div",{className:"div-button",onClick:function(){e.setState({name:"trending"})}},r.a.createElement(i.b,{to:"#",className:"label"},r.a.createElement("i",{className:"icon trending"}),"Trending"))),r.a.createElement("li",{className:"fresh"===this.state.name?"selected":""},r.a.createElement("div",{className:"div-button",onClick:function(){e.setState({name:"fresh"})}},r.a.createElement(i.b,{to:"#",className:"label"},r.a.createElement("i",{className:"icon fresh"}),"Fresh")))))}}]),t}(r.a.Component),rt=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("li",null,r.a.createElement("div",{className:"div-button",onClick:null},r.a.createElement(i.b,{to:"#",className:"label"},r.a.createElement("i",{className:"icon hot"},r.a.createElement("img",{className:"icon hot",src:this.props.imageUrl,alt:this.props.name}))),r.a.createElement("button",{className:"my-button ",onClick:"more"===this.props.iconType?this.props.handleToggleVisibility:null},r.a.createElement("i",{className:"icon icon-right "+"".concat(this.props.iconType)})),r.a.createElement("p",{className:"test"},this.props.name)))}}]),t}(r.a.Component),ot=function(e){function t(e){var a;Object(l.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).setWrapperRef=a.setWrapperRef.bind(Object(j.a)(a)),a.handleClickOutside=a.handleClickOutside.bind(Object(j.a)(a)),a.handleToggleVisibility=a.handleToggleVisibility.bind(Object(j.a)(a)),a.state={name:"",visibility:!1};var n=Ve.syncGet();return a.categories=n||[],a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"setWrapperRef",value:function(e){this.wrapperRef=e}},{key:"handleToggleVisibility",value:function(e){this.state.visibility?document.removeEventListener("click",this.handleClickOutside,!1):document.addEventListener("click",this.handleClickOutside,!1),this.setState(function(e){return{visibility:!e.visibility}})}},{key:"handleClickOutside",value:function(e){this.wrapperRef&&this.wrapperRef.contains(e.target)||this.handleToggleVisibility()}},{key:"render",value:function(){return r.a.createElement("div",{className:"category-div"},r.a.createElement("header",null,r.a.createElement("h3",null,"Sections")),r.a.createElement("ul",{className:"nav"},r.a.createElement(rt,{name:"Vietnam \ud83c\uddfb\ud83c\uddf3",description:"Everything about Vietnam",imageUrl:"https://localhost:6969/assets/0_country_100.jpg",iconType:"more",handleToggleVisibility:this.handleToggleVisibility}),this.state.visibility&&r.a.createElement(at,null),this.categories.map(function(e){if("https://localhost:6969/assets/0_country_100.jpg"!==e.imageUrl)return r.a.createElement(rt,{key:e.name,name:e.name,description:e.description,imageUrl:e.imageUrl,iconType:"star"})})))}}]),t}(r.a.Component),st=function(e){return r.a.createElement("div",{className:"section-sidebar"},r.a.createElement("div",{className:"stealthy-scroll-container"},r.a.createElement("div",{className:"inside-section"},r.a.createElement(nt,null),r.a.createElement(ot,null),r.a.createElement("section",{className:"footer"},r.a.createElement("p",{className:"static"},r.a.createElement(i.b,{to:"#"},"Advertise"),r.a.createElement(i.b,{to:"#"},"Rules"),r.a.createElement(i.b,{to:"#"},"Tips"),r.a.createElement(i.b,{to:"#"},"FAQ"),r.a.createElement(i.b,{to:"#"},"Terms"),r.a.createElement(i.b,{to:"#"},"Privacy"),r.a.createElement(i.b,{to:"#"},"Jobs"),r.a.createElement(i.b,{to:"#"},"Contact"),r.a.createElement(i.b,{to:"#"},"Feedback"),r.a.createElement(i.b,{to:"#"},"Report Bad Ads")),r.a.createElement("p",{className:"static"},"9GAG \xa9 2019")))))},it=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("li",null,r.a.createElement(i.b,{to:"/"},r.a.createElement("div",{className:"article-img"},r.a.createElement("img",{src:this.props.img,alt:"article-img"})),r.a.createElement("div",{className:"article-info"},r.a.createElement("h3",null,this.props.info))))}}]),t}(r.a.Component),lt=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{id:"content-sidebar"},r.a.createElement("div",{className:"stealthy-scroll-container padding-top "},r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"block-feature-cover"},r.a.createElement("ul",null,r.a.createElement(it,{img:"https://miscmedia-9gag-fun.9cache.com/images/featured/1562507503.3532_vEBADE_300.jpg",info:"Florida Hunter Shoots Pool Worker After Mistaking Him For Green Iguana"}),r.a.createElement(it,{img:"https://miscmedia-9gag-fun.9cache.com/images/featured/1562507503.3532_vEBADE_300.jpg",info:"Florida Hunter Shoots Pool Worker After Mistaking Him For Green Iguana"}),r.a.createElement(it,{img:"https://miscmedia-9gag-fun.9cache.com/images/featured/1562507503.3532_vEBADE_300.jpg",info:"Florida Hunter Shoots Pool Worker After Mistaking Him For Green Iguana"}),r.a.createElement(it,{img:"https://miscmedia-9gag-fun.9cache.com/images/featured/1562507503.3532_vEBADE_300.jpg",info:"Florida Hunter Shoots Pool Worker After Mistaking Him For Green Iguana"}),r.a.createElement(it,{img:"https://miscmedia-9gag-fun.9cache.com/images/featured/1562507503.3532_vEBADE_300.jpg",info:"Florida Hunter Shoots Pool Worker After Mistaking Him For Green Iguana"}),r.a.createElement(it,{img:"https://miscmedia-9gag-fun.9cache.com/images/featured/1562507503.3532_vEBADE_300.jpg",info:"Florida Hunter Shoots Pool Worker After Mistaking Him For Green Iguana"}))))))}}]),t}(r.a.Component),ct=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={},a.onUnmount(ie.onChange(function(t,a){t&&a||e.history.push("/")})),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return this.props.children}}]),t}(F),ut=Object(h.f)(ct),mt=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).handleLogOut=Object(C.a)(N.a.mark(function e(){return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ce.clearAuthen();case 2:return e.next=4,ie.setState(null);case 4:case"end":return e.stop()}},e)})),a.state={},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(n.Fragment,null,r.a.createElement(ut,null,r.a.createElement(tt,{history:this.props.history,handleLogOut:this.handleLogOut}),r.a.createElement("div",{id:"container",className:"space-navbar"},r.a.createElement("div",{className:"sidebar-left"},r.a.createElement(st,null)),r.a.createElement("div",{className:"page"},this.props.children),r.a.createElement("div",{className:"sidebar-right"},r.a.createElement(lt,null)))))}}]),t}(n.Component),dt=Object(h.f)(mt),ht=a(205),pt=a.n(ht),ft=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={currentTag:"Hot"},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.state.currentTag;return r.a.createElement("div",{className:"profile"},r.a.createElement("section",{className:"profile-header"},r.a.createElement("header",null,r.a.createElement("h1",null,this.props.title))),r.a.createElement("div",{className:"tab-bar"},r.a.createElement("ul",{className:"menu"},r.a.createElement("li",{onClick:function(){e.setState({currentTag:"Hot"})}},r.a.createElement("div",{className:E()({selected:"Hot"===t})},"Hot")),r.a.createElement("li",{onClick:function(){e.setState({currentTag:"Fresh"})}},r.a.createElement("div",{className:E()({selected:"Fresh"===t})},"Fresh")))))}}]),t}(n.Component),gt=a(435),vt=a(436),bt=a(206),Et=null,yt=null;"undefined"!==typeof document.hidden?(Et="hidden",yt="visibilitychange"):"undefined"!==typeof document.msHidden?(Et="msHidden",yt="msvisibilitychange"):"undefined"!==typeof document.webkitHidden&&(Et="webkitHidden",yt="webkitvisibilitychange");var At=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).handleVisibilityChange=function(){document[Et]&&(a.videoElement&&a.videoElement.pause(),a.setState({showLength:!0,firstTime:!0,playing:!1}))},a.handlePlay=function(){a.videoElement&&a.videoElement.play(),a.state.firstTime&&(a.lengthTimeOut=setTimeout(function(){a.setState({showLength:!1})},2e3)),a.setState({firstTime:!1,playing:!0})},a.handlePause=function(){a.videoElement&&a.videoElement.pause(),a.setState({playing:!1})},a.togglePlay=function(e,t){e&&!a.state.firstTime?a.toggleSound(a.state.sound):t?a.handlePause():a.handlePlay()},a.toggleSound=function(e){e?(a.setState({sound:!1}),a.videoElement.muted=!0):(a.setState({sound:!0}),a.videoElement.muted=!1)},a.state={firstTime:!0,showLength:!0,playing:!1,sound:!1},a.videoElement=null,a.lengthTimeOut=null,a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.video.image460sv.hasAudio&&document.addEventListener(yt,this.handleVisibilityChange,!1)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.lengthTimeOut),this.props.video.image460sv.hasAudio&&document.removeEventListener(yt,this.handleVisibilityChange)}},{key:"render",value:function(){var e=this,t=this.props,a=t.video,n=t.videoStyle,o=t.containerStyle,s=a.image460sv,i=s.hasAudio,l=function(e){var t=Math.floor(e),a=Math.floor(t/60);return 1===(t=(t-=60*a).toString()).length&&(t="0".concat(t)),"".concat(a,":").concat(t)}(s.duration),c=this.state,u=c.playing,m=c.sound;return r.a.createElement(bt.a,{onEnter:this.handlePlay,onLeave:this.handlePause,topOffset:"40%",bottomOffset:"50%"},r.a.createElement("div",{style:o,className:"video-player"},r.a.createElement("div",{className:"video-container",style:n},r.a.createElement("video",{preload:"auto",poster:a.image460.url?a.image460.url:"",loop:"loop",style:n,autoPlay:!0===u,ref:function(t){return e.videoElement=t},onClick:function(){return e.togglePlay(i,u)},muted:!0},a.image460sv.vp9Url?r.a.createElement("source",{src:a.image460sv.vp9Url,type:"video/webm"}):null,a.image460svwm&&a.image460svwm.url?r.a.createElement("source",{src:a.image460svwm.url,type:"video/webm"}):null,a.image460sv.h265Url?r.a.createElement("source",{src:a.image460sv.h265Url,type:"video/mp4"}):null,a.image460sv.url?r.a.createElement("source",{src:a.image460sv.url,type:"video/mp4"}):null),i?r.a.createElement("div",{className:"sound-toggle",onClick:function(){return e.toggleSound(m)}},r.a.createElement("span",{className:E()({on:!0===m,off:!1===m})})):null,i?r.a.createElement("p",{className:E()("length",{hide:!this.state.showLength})},l):null,r.a.createElement("div",{className:E()({hide:!0===u,presenting:!1===u})},i?null:r.a.createElement("span",{className:"play",onClick:function(){return e.togglePlay(i,u)}},"GIF"),i?r.a.createElement("span",{className:"playVideo",onClick:function(){return e.togglePlay(i,u)}},"Play"):null))))}}]),t}(n.Component),wt=function(e){function t(e){var a;Object(l.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).handleVote=function(){var e=Object(C.a)(N.a.mark(function e(t){var n,r,o,s,i,l,c,u,m,d,h;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:ie.getState()?(n=a.state,r=n.currentVote,o=n.upVoteCount,s=n.downVoteCount,"UP"===r?(i=o-1<0?0:o-1,t?a.setState({currentVote:"",upVoteCount:i}):(l=s+1,a.setState({currentVote:"DOWN",upVoteCount:i,downVoteCount:l}))):"DOWN"===r?(c=s-1<0?0:s-1,t?(u=o+1,a.setState({currentVote:"UP",downVoteCount:c,upVoteCount:u})):a.setState({currentVote:"",downVoteCount:c})):t?(m=o+1,a.setState({currentVote:"UP",upVoteCount:m})):(d=s+1,a.setState({currentVote:"DOWN",downVoteCount:d})),h=null,clearTimeout(a.timeout),a.timeout=setTimeout(Object(C.a)(N.a.mark(function e(){var n,r,o;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t){e.next=7;break}return e.next=4,Le.updateVotePost(a.props.post._id,1);case 4:h=e.sent,e.next=10;break;case 7:return e.next=9,Le.updateVotePost(a.props.post._id,0);case 9:h=e.sent;case 10:n=h.data,r=n.upVoteCount,o=n.downVoteCount,a.setState({upVoteCount:r,downVoteCount:o}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),a.setState({error:e.t0});case 17:case"end":return e.stop()}},e,null,[[0,14]])})),1e3)):we.open(function(){return a.props.history.push("/")},function(){a.handleVote(t)});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();var n=ie.getState(),r="";if(n){var o=a.props.post._id,s=n.upVotes.findIndex(function(e){return e===o}),i=n.downVotes.findIndex(function(e){return e===o});-1!==s?r="UP":-1!==i&&(r="DOWN")}return a.state={upVoteCount:a.props.post.upVoteCount,downVoteCount:a.props.post.downVoteCount,currentVote:r,error:null,showMore:!1},a.pictureStyle={},a.videoStyle={},a.videoContainerStyle={},a.timeout=null,a.onUnmount(ie.onChange(function(e,t){if(e){if(!t){var n=e.upVotes,r=e.downVotes,o=a.props.post._id,s=n.findIndex(function(e){return e===o});-1!==s?a.setState({currentVote:"UP"}):-1!==(s=r.findIndex(function(e){return e===o}))&&a.setState({currentVote:"DOWN"})}}else a.setState({currentVote:""})})),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){var e=this.props.post,t=e.images,a=e.type,n=t.image460,r=t.image460sv;if("Photo"===a)n.width===n.height?this.pictureStyle={minHeight:500}:this.pictureStyle={minHeight:500/n.width*n.height};else if("Animated"===a)if(r.width===r.height)this.videoStyle={minHeight:500};else if(r.width>r.height)this.videoStyle={minHeight:500/r.width*r.height};else{var o=500/r.height*r.width;this.videoStyle={width:o,height:500,maxWidth:500},this.videoContainerStyle={paddingLeft:(500-o)/2}}}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.props,a=t.post,n=t.firstPost,o=a.images,s=a.type,l=a.createdAt,c=o.image460,u=this.state,m=u.downVoteCount,d=u.upVoteCount,h=u.showMore,p=qe(new Date(l)),f=r.a.createElement("picture",{style:this.pictureStyle},c.webpUrl?r.a.createElement("source",{srcSet:c.webpUrl,type:"image/webp"}):null,r.a.createElement("img",{src:c.url,alt:a.name,style:this.pictureStyle}));return"Animated"===s&&(f=r.a.createElement(At,{video:o,videoStyle:this.videoStyle,containerStyle:this.videoContainerStyle})),r.a.createElement("article",{className:E()("post",{"no-pd-t":n})},r.a.createElement("header",{className:"post-header"},r.a.createElement("div",{className:"post-section"},r.a.createElement("img",{className:"post-section__category-icon",src:a.images.image460.url,alt:"category-icon"}),r.a.createElement("p",{className:"post-section__message"},r.a.createElement("span",null,a.title)," \xb7 "+p)),r.a.createElement("h1",{className:"linked-title",onClick:function(){return e.props.history.push("/gag/".concat(a._id))}},a.title)),r.a.createElement("div",{className:"post-containter"},f),r.a.createElement("p",{className:"post-meta"},r.a.createElement(i.b,{to:"/gag/".concat(a._id),className:"post-meta__text"},d-m+" points")," \xb7 ",r.a.createElement(i.b,{to:"/",className:"post-meta__text"},a.comments.length+" comments")),r.a.createElement("div",{className:"post-after-bar"},r.a.createElement("ul",{className:"btn-vote left"},r.a.createElement("li",null,r.a.createElement("div",{className:E()("btn-border up",{selected:"UP"===this.state.currentVote}),onClick:function(){return e.handleVote(!0)}})),r.a.createElement("li",null,r.a.createElement("div",{className:E()("btn-border down",{selected:"DOWN"===this.state.currentVote}),onClick:function(){return e.handleVote(!1)}})),r.a.createElement("li",null,r.a.createElement("div",{className:"btn-border comment"}))),r.a.createElement("div",null,r.a.createElement("ul",{className:"btn-vote left"},r.a.createElement("li",null,r.a.createElement("div",{className:"btn-border more",onClick:function(){e.setState(function(e,t){return{showMore:!e.showMore}})}}))),r.a.createElement("div",{className:E()("popup-viewshare",{hide:!h})},r.a.createElement("ul",null,r.a.createElement("li",null,"Twitter"),r.a.createElement("li",null,"Email"),r.a.createElement("li",null,"Report"),r.a.createElement("li",null,"I just don't like it")))),r.a.createElement("div",{className:"btn-border share right"},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(gt.a,{url:"https://github.com"},r.a.createElement($,{text:"Facebook"}))," "),r.a.createElement("li",null,r.a.createElement(vt.a,{url:"https://github.com",media:a.images.image700.url},r.a.createElement(ee,{text:"Pinterest"}))))),r.a.createElement("div",{className:"clearfix"})))}}]),t}(F),kt=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={currentTag:"Hot",loading:!1,error:null,posts:[],nextLink:0,hasMoreItems:!0},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"loadItems",value:function(e){var t=this;null!==this.state.nextLink&&Le.getPosts(e).then(function(e){var a=[].concat(Object(He.a)(t.state.posts),Object(He.a)(e.post));null!==e.nextLink&&t.setState({posts:a,loading:!1,error:null,nextLink:e.nextLink,hasMoreItems:e.hasMoreItems})})}},{key:"componentDidMount",value:function(){var e=this;this.setState({loading:!0}),Le.getPosts().then(function(t){console.log(t),e.setState({posts:t.post,loading:!1,error:null})}).catch(function(t){e.setState({loading:!1,error:null}),console.log(t)})}},{key:"render",value:function(){var e,t=this,a=this.props,n=a.className,o=a.hasProfile;return e=this.state.posts.map(function(e,a){return r.a.createElement(wt,{firstPost:0===a,key:e._id,post:e,history:t.props.history})}),r.a.createElement("div",{className:E()("feed",n)},o?r.a.createElement(ft,{title:"Area 51"}):null,r.a.createElement(pt.a,{pageStart:0,loadMore:this.loadItems.bind(this),hasMore:this.state.hasMoreItems,loader:r.a.createElement("div",{style:{display:"flex",justifyContent:"center"},key:"0"},r.a.createElement("div",{className:"lds-ripple"},r.a.createElement("div",null),r.a.createElement("div",null)))},e))}}]),t}(n.Component),Nt=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return r.a.createElement(dt,null,r.a.createElement(kt,{hasProfile:!1,history:this.props.history}))}}]),t}(n.Component),Ct=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={focusingImage:!0},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return r.a.createElement("div",null,"hehe")}}]),t}(n.Component),St=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{id:"error-page"},r.a.createElement("div",{className:"background-404"}),r.a.createElement("header",{className:"top-nav"},r.a.createElement(i.b,{className:"logo-9gag",to:"/"},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"64px",height:"48px",viewBox:"0 0 64 48",version:"1.1"},r.a.createElement("title",null,"logo"),r.a.createElement("desc",null,"Created with Sketch."),r.a.createElement("g",{id:"Asset",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},r.a.createElement("g",{id:"logo",fill:"#FFFFFF"},r.a.createElement("path",{d:"M32 12L21 18.25 21 20.75 32 27 38.6 23.25 38.6 28.25 32 32 25.4 28.25 21 30.75 32 37 43 30.75 43 18.25 32 12ZM27.6 19.5L32 17 36.4 19.5 32 22 27.6 19.5 27.6 19.5Z",id:"Icon"})))))),r.a.createElement("div",{className:"message-404"},r.a.createElement("h1",null,"404"),r.a.createElement("h2",null,"There's nothing here."),r.a.createElement("h3",null,"Find what you're looking for with our app."),r.a.createElement("button",{className:"btn-download-app"},"Download app")))}}]),t}(n.Component),Ot=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).selectVal=null,a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("select",{name:this.props.name,value:this.props.optionValue,onChange:this.props.handleSelector},this.props.data.map(function(e){return r.a.createElement("option",{key:e.key,value:e.value},e.key)}))}}]),t}(n.Component),jt=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).handleUpdateAccount=function(e){var t=a.form.getData(),n=t.newUsername,r=t.newEmail,o=a.state.optionShowNSFW,s=a.state.optionMaskNSFW;Ee.updateAccount({newUsername:n,newEmail:r,newShowNSFW:o,newMaskNSFW:s}).then(function(e){"update_account_successfully"===e.data.message?(a.setState({loading:!1}),a.props.history.push("/")):a.setState({error:{message:"bad_error"},loading:!1})}).catch(function(e){a.setState({error:e,loading:!1})})},a.handleChangeUsername=function(e){a.state.checkingUsername||a.setState({checkingUsername:!0}),a.setState({error:"",newUsername:e}),console.log(e),a.accountSchema.isValidSync({newUsername:e,newEmail:a.state.data.email})?a.debounceCheckUsernameExisted(e):a.setState({loadingUsername:!1})},a.checkUsernameExisted=function(e){console.log("imasd"),ie.getState().username!==e&&(a.setState({loadingUsername:!0}),Ee.checkUsername({username:e}).then(function(e){console.log(e),"account_found"===e.data.message?a.setState({error:{message:"user_account_found"},checkingUsername:!1,loadingUsername:!1}):"account_not_found"===e.data.message?a.setState({error:"",checkingUsername:!1,loadingUsername:!1}):a.setState({error:{message:"bad_error"},checkingUsername:!1,loadingUsername:!1})}).catch(function(e){a.setState({error:e,checkingUsername:!1,loadingUsername:!1})}))},a.handleChangeEmail=function(e){a.state.checkingEmail||a.setState({checkingEmail:!0}),a.setState({error:"",newEmail:e}),a.accountSchema.isValidSync({newEmail:e,newUsername:a.state.data.username})?(console.log("Start querying"),a.debounceCheckEmailExisted(e)):a.setState({loadingEmail:!1})},a.checkEmailExisted=function(e){e!==ie.getState().email&&(a.setState({loadingEmail:!0}),Ee.checkEmail({email:e}).then(function(e){console.log(e),"account_found"===e.data.message?a.setState({error:{message:"email_account_found"},checkingEmail:!1,loadingEmail:!1}):"account_not_found"===e.data.message?a.setState({error:"",checkingEmail:!1,loadingEmail:!1}):a.setState({error:{message:"bad_error"},checkingEmail:!1,loadingEmail:!1})}).catch(function(e){a.setState({error:e,checkingEmail:!1,loadingEmail:!1})}))},a.debounceCheckUsernameExisted=ve()(a.checkUsernameExisted,500),a.debounceCheckEmailExisted=ve()(a.checkEmailExisted,500),a.handleSelectorMaskNSFW=function(e){a.setState({optionMaskNSFW:e.target.value}),console.log(a.state.optionMaskNSFW)},a.handleSelectorShowNSFW=function(e){a.setState({optionShowNSFW:e.target.value})},a.handleServerError=function(){var e=a.state.error,t=a.form.getData().newEmail,n=a.form.getData().newUsername,r=e.message,o={email_account_found:"Email ".concat(t," have been used "),network_error:"Database is ded",user_account_found:"Username ".concat(n," have been used "),account_not_found:"This user is not valid."};return o.hasOwnProperty(r)?o[r]:"Something bad happened."},a.state={data:ie.getState(),optionMaskNSFW:ie.getState().maskNSFW,optionShowNSFW:ie.getState().showNSFW,email:"",checkingUsername:!1,checkingEmail:!1,loadingUsername:!1,loadingEmail:!1,error:"",loading:!1},a.accountSchema=de.object().shape({newUsername:de.string().min(4,"Username must be at least 6-char long.").max(15,"Username max length is 15."),newEmail:de.string().email("Email is not valid.").required("Email should not be null.")}),a.form=Q(a.accountSchema,{initData:{newUsername:a.state.data.username,newEmail:a.state.data.email}}),a.onUnmount(a.form.on("change",function(){return a.forceUpdate()})),a.form.validateData(),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;console.log(this.form.getInvalidPaths());var t=0===this.form.getInvalidPaths().length&&""===this.state.error&&!this.state.checking&&!this.state.loading&&!this.state.loadingEmail&&!this.state.loadingUsername;return console.log(this.state.data),console.log(this.state),r.a.createElement("form",{id:"setting-form"},r.a.createElement("h2",null,"Account"),r.a.createElement("div",{className:"field"},this.state.error&&r.a.createElement("div",{className:"server-error"},this.handleServerError())),r.a.createElement("div",{className:"field width440px"},r.a.createElement("label",null,"Username"),this.form.enhancedComponent("newUsername",function(t){var a=t.error,n=t.onChange,o=t.onEnter,s=Object(D.a)(t,["error","onChange","onEnter"]);return r.a.createElement(Y,Object.assign({maxLength:"15",className:"",error:a,onChange:function(t){var a=t.target.value;n(t),e.handleChangeUsername(a)},onKeyDown:o,type:"text",icon:e.state.loadingUsername?r.a.createElement("i",{className:"fas fa-spinner spin"}):null},s))},!0),r.a.createElement("p",{className:"tips"},"https://9gag.com/u/",this.state.data.username)),r.a.createElement("div",{className:"field width440px"},r.a.createElement("label",null,"Email"),this.form.enhancedComponent("newEmail",function(t){var a=t.error,n=t.onChange,o=t.onEnter,s=Object(D.a)(t,["error","onChange","onEnter"]);return r.a.createElement(Y,Object.assign({maxLength:"200",className:"",error:a,id:"email",onKeyDown:o,onChange:function(t){var a=t.target.value;n(t),e.handleChangeEmail(a)},type:"email",icon:e.state.loadingEmail?r.a.createElement("i",{className:"fas fa-spinner spin"}):null},s))},!0),r.a.createElement("p",{className:"tips"},"Email will not be displayed publicly")),r.a.createElement("div",{className:"field"},r.a.createElement("label",null,"Mask Sensitive Content"),r.a.createElement(Ot,{name:"saveMode",data:[{value:"true",key:"On"},{value:"false",key:"Off"}],optionValue:this.state.optionMaskNSFW,handleSelector:this.handleSelectorMaskNSFW})),r.a.createElement("div",{className:"field"},r.a.createElement("label",null,"Show Sensitive Content"),r.a.createElement(Ot,{name:"nsfwMode",data:[{value:"true",key:"On"},{value:"false",key:"Off"}],optionValue:this.state.optionShowNSFW,handleSelector:this.handleSelectorShowNSFW})),r.a.createElement("div",{className:"btn-setting-container"},r.a.createElement("button",{className:"my-blue-button",disabled:!t,onClick:this.handleUpdateAccount},"Save Changes")))}}]),t}(F),xt=function(e){function t(e){var a;Object(l.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).handleUpdateProfile=function(){var e=ie.getState.avatarURL,t=a.form.getData(),n=t.name,r=t.birthdayYear,o=t.birthdayDay,s=t.birthdayMonth,i=t.blogText,l=new Date(r,s,o),c=a.state.optionStatus,u=a.state.optionCountry,m=a.state.optionGender;Ee.updateProfile({avatarUrl:e,name:n,status:c,country:u,gender:m,birthday:l,description:i}).then(function(e){"update_account_successfully"===e.data.message?(a.setState({loading:!1}),a.props.history.push("/")):a.setState({error:{message:"bad_error"},loading:!1})}).catch(function(e){a.setState({error:e,loading:!1})})},a.handleSelectorStatus=function(e){a.setState({optionStatus:e.target.value})},a.handleSelectorCountry=function(e){a.setState({optionCountry:e.target.value})},a.handleSelectorGender=function(e){a.setState({optionGender:e.target.value})},a.handleServerError=function(){var e=a.state.error.message,t={network_error:"Database is ded",account_not_found:"This user is not valid."};return t.hasOwnProperty(e)?t[e]:"Something bad happened."},a.state={data:ie.getState(),loading:!1,error:"",optionStatus:ie.getState().statusId,optionCountry:ie.getState().country,optionGender:ie.getState().gender};var n=Ie.syncGet();a.status=n.map(function(e){return{key:"".concat(e.alt," ").concat(e.name),value:"".concat(e._id)}});var r=Fe.syncGet();a.countries=r.map(function(e){return{key:e.name,value:e._id}}),a.profileSchema=de.object().shape({name:de.string().min(2,"Username must be at least 2-char long.").max(15,"Username max length is 15."),birthdayYear:de.number().integer(),birthdayMonth:de.number().integer(),birthdayDay:de.number().integer(),blogText:de.string().max(120,"Max length id 120")});var o=new Date(a.state.data.birthday),s={year:null!==o?o.getFullYear():null,date:null!==o?o.getDate():null,month:null!==o?o.getMonth():null};return console.log(s),a.form=Q(a.profileSchema,{initData:{name:a.state.data.name,birthdayYear:s.year,birthdayMonth:s.month,birthdayDay:s.date,blogText:"My funny collection"}}),console.log(a.form.getData()),a.onUnmount(a.form.on("change",function(){return a.forceUpdate()})),a.form.validateData(),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;console.log(this.state.data.birthday);var t=0===this.form.getInvalidPaths().length&&""===this.state.error&&!this.state.checking&&!this.state.loading;return r.a.createElement("form",{id:"setting-form"},r.a.createElement("h2",null,"Profile"),r.a.createElement("div",{className:"field"},this.state.error&&r.a.createElement("div",{className:"server-error"},this.handleServerError())),r.a.createElement("div",{className:"field avatar"},r.a.createElement("label",null,"Avatar"),r.a.createElement("div",{className:"avatar-content"},r.a.createElement("div",{className:"avatar-container"},r.a.createElement("div",null,r.a.createElement("img",{src:this.state.data.avatarURL,alt:"avatar"}))),r.a.createElement("div",{className:"control"},r.a.createElement("input",{type:"file",name:"avatar",accept:".jpg, .gif, .png"}),r.a.createElement("p",{className:"tips"},"JPG, GIF or PNG, Max size: 2MB"),r.a.createElement(i.b,{to:"#"},"Random")))),r.a.createElement("div",{className:"field"},r.a.createElement("label",null,"Your Name"),this.form.enhancedComponent("name",function(t){var a=t.error,n=t.onChange,o=(t.onEnter,Object(D.a)(t,["error","onChange","onEnter"]));return r.a.createElement(Y,Object.assign({maxLength:"20",className:"",error:a,onChange:function(e){n(e)},type:"text",icon:e.state.loadingEmail?r.a.createElement("i",{className:"fas fa-spinner spin"}):null},o))},!0),r.a.createElement("p",{className:"tips"},"This is the name that will be visible to other users on 9GAG.")),r.a.createElement("div",{className:"field"},r.a.createElement("label",null,"Status"),r.a.createElement(Ot,{name:"emojiStatus",data:this.status,optionValue:this.state.optionStatus,handleSelector:this.handleSelectorStatus})),r.a.createElement("div",{className:"field"},r.a.createElement("label",null,"Gender"),r.a.createElement(Ot,{name:"saveMode",data:[{value:"NULL",key:"Select Gender..."},{value:"FEMALE",key:"Female"},{value:"MALE",key:"Male"},{value:"UNSPECIFIED",key:"Unspecified"}],optionValue:this.state.optionGender,handleSelector:this.handleSelectorGender})),r.a.createElement("div",{className:"field"},r.a.createElement("label",null,"Birthday"),r.a.createElement("div",{className:"date-picker"},this.form.enhancedComponent("birthdayYear",function(t){var a=t.error,n=t.onChange,o=(t.onEnter,Object(D.a)(t,["error","onChange","onEnter"]));return r.a.createElement(Y,Object.assign({placeholder:"YYYY",className:"year",error:a,onChange:function(e){n(e)},type:"number",icon:e.state.loadingEmail?r.a.createElement("i",{className:"fas fa-spinner spin"}):null},o))},!0),this.form.enhancedComponent("birthdayMonth",function(t){var a=t.error,n=t.onChange,o=(t.onEnter,Object(D.a)(t,["error","onChange","onEnter"]));return r.a.createElement(Y,Object.assign({placeholder:"MM",className:"month",error:a,onChange:function(e){n(e)},type:"number",min:"1",max:"12",icon:e.state.loadingEmail?r.a.createElement("i",{className:"fas fa-spinner spin"}):null},o))},!0),this.form.enhancedComponent("birthdayDay",function(t){var a=t.error,n=t.onChange,o=(t.onEnter,Object(D.a)(t,["error","onChange","onEnter"]));return r.a.createElement(Y,Object.assign({placeholder:"DD",className:"day",min:"1",max:"31",error:a,onChange:function(e){n(e)},type:"number",icon:e.state.loadingEmail?r.a.createElement("i",{className:"fas fa-spinner spin"}):null},o))},!0))),r.a.createElement("div",{className:"field"},r.a.createElement("label",null,"Country"),r.a.createElement(Ot,{name:"country",id:"country_selector",data:this.countries,optionValue:this.state.optionCountry,handleSelector:this.handleSelectorCountry}),r.a.createElement("p",{className:"tips"},"Tell us where you're from so we can provide better service for you.")),r.a.createElement("div",{className:"field"},r.a.createElement("label",null,"Tell people who you are"),this.form.enhancedComponent("blogText",function(e){var t=e.error,a=e.onChange,n=(e.onEnter,Object(D.a)(e,["error","onChange","onEnter"]));return r.a.createElement(Y,Object.assign({maxLength:"120",type:"text-area",className:"my-txt-area",error:t,onChange:function(e){a(e)}},n))},!0)),r.a.createElement("div",{className:"setting-social-connect"},r.a.createElement("label",null,"Social Networks"),r.a.createElement("div",{className:"connection"},r.a.createElement("div",{className:"field social"},r.a.createElement("p",{className:"label"},"Facebook connected"),r.a.createElement("button",{className:"my-blue-button"},"Connect now"))),r.a.createElement("div",{className:"connection"},r.a.createElement("div",{className:"field"},r.a.createElement("p",{className:"label"},"Google not connected"),r.a.createElement("button",{className:"my-blue-button"},"Connect now")))),r.a.createElement("div",{className:"field"},r.a.createElement("label",null,"Your 9GAG Data"),r.a.createElement("p",{className:"tips"},"You can ",r.a.createElement(i.b,{to:"#"},"request")," a PDF with your 9GAG data. We\u2019ll send it to your email once ready.")),r.a.createElement("div",{className:"my-btn-container"},r.a.createElement("button",{className:"my-blue-button",disabled:!t,onClick:this.handleUpdateProfile},"Save Changes")))}}]),t}(F),Pt=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).handleChangePassword=function(e){var t=a.form.getData(),n=t.currentPassword,r=t.newPassword;Ee.putChangePassword({currentPassword:n,newPassword:r}).then(function(e){"changed_password_successfully"===e.data.message||"changed_password_the_1st_time_successfully"===e.data.message?(a.setState({loading:!1}),a.props.history.push("/")):a.setState({error:{message:"bad_error"},loading:!1})}).catch(function(e){a.setState({error:e,loading:!1})})},a.handleServerError=function(){var e=a.state.error.message,t={network_error:"Database is ded.",user_validation_faied:"Password is not valid.",incorrect_password:"Current password is wrong",account_not_found:"This user is not valid."};return t.hasOwnProperty(e)?t[e]:"Something bad happened."},a.state={loading:!1,error:"",data:ie.getState()},a.passwordSchema=de.object().shape({currentPassword:de.string().min(6,"Password must be at least 6-char long.").required("Password should not be empty"),newPassword:de.string().min(6,"New password must be at least 6-char long.").required("New password should not be empty"),comfirmNewPassword:de.string().equalTo(de.ref("newPassword"),"New password must match").required("Confirmed new password should not be empty")}),a.form=Q(a.passwordSchema,{initData:{currentPassword:"",newPassword:"",comfirmNewPassword:""}}),a.onUnmount(a.form.on("change",function(){return a.forceUpdate()})),a.form.validateData(),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return console.log(ie.getState()),r.a.createElement("form",{id:"setting-form"},r.a.createElement("h2",null,"Password"),(1===this.state.data.social.length&&this.state.data.isChangePassword||1!==this.state.data.social.length)&&r.a.createElement("div",{className:"field"},r.a.createElement("label",null,"Current Password"),this.form.enhancedComponent("currentPassword",function(e){var t=e.error,a=e.onChange;Object(D.a)(e,["error","onChange"]);return r.a.createElement(Y,{maxLength:"32",className:"",error:t,onChange:function(e){a(e)},type:"password"})},!0)),r.a.createElement("div",{className:"field"},r.a.createElement("label",null,"New Password"),this.form.enhancedComponent("newPassword",function(e){var t=e.error,a=e.onChange;Object(D.a)(e,["error","onChange"]);return r.a.createElement(Y,{maxLength:"32",className:"",error:t,onChange:function(e){a(e)},type:"password"})},!0)),r.a.createElement("div",{className:"field"},r.a.createElement("label",null,"Re-type New Password"),this.form.enhancedComponent("comfirmNewPassword",function(e){var t=e.error,a=e.onChange;Object(D.a)(e,["error","onChange"]);return r.a.createElement(Y,{maxLength:"32",className:"",error:t,onChange:function(e){a(e)},type:"password"})},!0)),this.state.error&&r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"server-error"},this.handleServerError())),r.a.createElement("div",{className:"btn-setting-container"},r.a.createElement("button",{className:"my-blue-button",disabled:this.state.loading,onClick:this.handleChangePassword},"Save Changes")))}}]),t}(F),Dt=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return console.log(this.props),r.a.createElement("div",null,"account"===this.props.match.params.settingId&&r.a.createElement(jt,null),"password"===this.props.match.params.settingId&&r.a.createElement(Pt,null),"profile"===this.props.match.params.settingId&&r.a.createElement(xt,null))}}]),t}(n.Component),Ut=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).handleLoginSuccess=function(){a.forceUpdate()},a.handleLogOut=Object(C.a)(N.a.mark(function e(){return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ce.clearAuthen();case 2:return e.next=4,ie.setState(null);case 4:case"end":return e.stop()}},e)})),a.state={},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(n.Fragment,null,r.a.createElement(ut,null,r.a.createElement(tt,{history:this.props.history,handleLogOut:this.handleLogOut}),r.a.createElement("div",{id:"container",className:"space-navbar"},r.a.createElement("div",{className:"sidebar-left"},r.a.createElement(st,null)),r.a.createElement("div",{className:"page-container"},this.props.children))))}}]),t}(n.Component),Rt=Object(h.f)(Ut),Vt=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={name:"account"},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return console.log(this.props),r.a.createElement(Rt,null,r.a.createElement("div",{id:"settings"},r.a.createElement("ul",{className:"form-nav"},r.a.createElement("li",{key:"Account",onClick:function(){e.setState({name:"account"})}},r.a.createElement(i.b,{className:"account"===this.state.name?"selected":"",to:"".concat(this.props.match.url,"/account")},"Account")),r.a.createElement("li",{key:"Password",onClick:function(){e.setState({name:"password"})}},r.a.createElement(i.b,{className:"password"===this.state.name?"selected":"",to:"".concat(this.props.match.url,"/password")},"Password")),r.a.createElement("li",{key:"Profile",onClick:function(){e.setState({name:"profile"})}},r.a.createElement(i.b,{className:"profile"===this.state.name?"selected":"",to:"".concat(this.props.match.url,"/profile")},"Profile"))),r.a.createElement(h.c,null,r.a.createElement(h.a,{path:"".concat(this.props.match.path,"/:settingId"),component:Dt}),r.a.createElement(h.a,{path:"".concat(this.props.match.path),component:jt}))))}}]),t}(n.Component),It=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).handleForgotPassword=function(){var e=a.state.email;a.setState({error:"",loading:!0}),Ee.postForgotPassword({email:e}).then(function(e){"reset_email_sent"===e.data.message?a.setState({sentPassword:!0,loading:!1}):a.setState({error:{message:"bad_error"},loading:!1,sentPassword:!0})}).catch(function(e){a.setState({error:e,loading:!1})})},a.checkEmailExisted=function(e){a.setState({loading:!0}),Ee.checkEmail({email:e}).then(function(e){console.log(e),"account_found"===e.data.message?a.setState({error:"",checking:!1,loading:!1,validated:!0}):"account_not_found"===e.data.message?a.setState({error:{message:"account_not_found"},checking:!1,loading:!1,validated:!1}):a.setState({error:{message:"bad_error"},checking:!1,loading:!1,validated:!1})}).catch(function(e){a.setState({error:e,checking:!1,loading:!1,validated:!1})})},a.debounceCheckEmailExisted=ve()(a.checkEmailExisted,1500),a.handleServerError=function(){var e=a.state.error,t=a.form.getData().email,n=e.message,r={account_not_found:"Email ".concat(t," is not used for any user!"),network_error:"Database is ded"};return r.hasOwnProperty(n)?r[n]:"Something bad happened."},a.handleChange=function(e){a.state.checking||a.setState({checking:!0}),a.setState({error:"",email:e}),a.forgotPasswordSchema.isValidSync({email:e})?(console.log("Start querying"),a.debounceCheckEmailExisted(e)):a.setState({loading:!1})},a.state={email:"",checking:!1,loading:!1,validated:!1,sentPassword:!1,error:""},a.forgotPasswordSchema=de.object().shape({email:de.string().email("Email is not valid.").required("Email should not be null.")}),a.form=Q(a.forgotPasswordSchema,{initData:{email:""}}),a.onUnmount(a.form.on("change",function(){return a.forceUpdate()})),a.onUnmount(a.form.on("enter",function(){return a.handleForgotPassword()})),a.form.validateData(),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=""!==this.form.getPathData("email")&&""===this.state.error&&!this.state.checking&&!this.state.loading&&this.state.validated;return r.a.createElement(dt,null,r.a.createElement("div",{className:"forgot-password-page"},r.a.createElement("h1",{className:"forgot-password-title"},"Forgot Password"),this.state.sentPassword?r.a.createElement("div",{className:"forgot-password-res"},r.a.createElement("p",{className:"forgot-password-res-text"},"You should receive an email shortly."),r.a.createElement("p",{className:"forgot-password-res-text"},"If you still need assistance, contant me.")):r.a.createElement("div",{className:"forgot-password-action"},r.a.createElement("div",{className:"forgot-password-form"},this.form.enhancedComponent("email",function(t){var a=t.error,n=t.onChange,o=t.onEnter,s=Object(D.a)(t,["error","onChange","onEnter"]);return r.a.createElement(Y,Object.assign({className:"forgot-password-input",error:a,success:e.state.validated,id:"email",onKeyDown:o,onChange:function(t){var a=t.target.value;n(t),e.handleChange(a)},type:"email",label:"Your email address",placeholder:"name@email.com",icon:e.state.loading?r.a.createElement("i",{className:"fas fa-spinner spin"}):null},s))},!0),this.state.error&&r.a.createElement("div",{className:"server-error"},this.handleServerError())),r.a.createElement("button",{className:"btn btn-primary",disabled:!t,onClick:this.handleForgotPassword},"Send Information"))))}}]),t}(F),Ft=a(212),Lt=a.n(Ft),Mt=function(e){function t(e){var a;Object(l.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).handleResetPassword=function(){var e=a.form.getData().password;console.log(a.token),a.setState({error:"",loading:!0}),Ee.postUpdatePassword({password:e,token:a.token}).then(function(e){"change_password_successfully"===e.data.message?(a.setState({loading:!1}),a.props.history.push("/")):a.setState({error:{message:"bad_error"},loading:!1})}).catch(function(e){a.setState({error:e,loading:!1})})},a.handleServerError=function(){var e=a.state.error.message,t={network_error:"Database is ded.",user_validation_faied:"Password is not valid.",token_expired:"Reset password token is expired.",account_not_found:"This user is not valid."};return t.hasOwnProperty(e)?t[e]:"Something bad happened."},a.state={loading:!1,error:""};var n=new URLSearchParams(a.props.location.search);return a.token=n.get("token"),a.passwordSchema=de.object().shape({password:de.string().min(6,"Password must be at least 6-char long.").required("Password should not be empty"),confirmPassword:de.string().equalTo(de.ref("password"),"Passwords must match").required("Confirmed password should not be empty")}),a.form=Q(a.passwordSchema,{initData:{password:"",confirmPassword:""}}),a.onUnmount(a.form.on("change",function(){return a.forceUpdate()})),a.onUnmount(a.form.on("enter",function(){return a.handleForgotPassword()})),a.form.validateData(),console.log(a.props),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(dt,null,r.a.createElement("div",{className:"reset-password-page"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("div",{className:"logo-center"},r.a.createElement("img",{src:Lt.a,alt:"Logo",height:"125"})))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-8 col-center-block"},r.a.createElement("div",{className:"reset-pw-form-title"},r.a.createElement("h3",null,"Reset Password")),r.a.createElement("div",{className:"form-group"},r.a.createElement("p",{className:"help-block"},"Enter your new password for your account")),r.a.createElement("div",{className:"form-group"},this.form.enhancedComponent("password",function(e){var t=e.error,a=e.onChange,n=(e.onEnter,Object(D.a)(e,["error","onChange","onEnter"]));return r.a.createElement(Y,Object.assign({className:"reset-password-input",autoFocus:!0,error:t,id:"password",onChange:function(e){a(e)},type:"password",label:"New password"},n))},!0)),r.a.createElement("div",{className:"form-group"},this.form.enhancedComponent("confirmPassword",function(e){var t=e.error,a=e.onChange,n=e.onEnter,o=Object(D.a)(e,["error","onChange","onEnter"]);return r.a.createElement(Y,Object.assign({className:"reset-password-input",error:t,id:"confirmPassword",onKeyDown:n,onChange:function(e){a(e)},type:"password",label:"Confirm new password"},o))},!0)),this.state.error&&r.a.createElement("div",{className:"server-error"},this.handleServerError()),r.a.createElement("div",{className:"btn-container"},r.a.createElement("button",{className:"btn btn-primary",disabled:this.state.loading,onClick:this.handleResetPassword},"Reset Password"))))))}}]),t}(F),Tt=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=new URLSearchParams(this.props.location.search).get("token");Ee.getVerifyUser(t).then(function(t){ce.setAuthen(t.data.token,{expire:1}),ie.setState(t.data.user).then(function(){e.props.history.push("/")}).catch(function(e){})})}},{key:"render",value:function(){return r.a.createElement("div",null)}}]),t}(n.Component),_t=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).handleServerError=function(){var e=a.state.error.message,t={invalid_url:"Invalid URL.",network_error:"Database is ded."};return t.hasOwnProperty(e)?t[e]:"Something bad happened."},a.handleSectionClick=function(e){a.setState({currentReason:e.name})},a.handleCancelClicked=function(){a.state.proceed?a.setState({currentReason:null,proceed:!1}):a.props.onClose()},a.handleNext=function(){a.setState({proceed:!0})},a.state={loading:!1,error:null,currentReason:null,proceed:!1},a.reportData=[{name:"Spam",description:[{type:"p",content:"Report as spam?"},{type:"p",content:"We remove:"},{type:"ul",content:["Clickbait","Advertising","Scam","Script bot"]},{type:"p",content:"If you report someone's post, 9GAG doesn't tell them who reported it."}]},{name:"Pornography",description:[{type:"p",content:"Report as spam?"},{type:"p",content:"We remove:"},{type:"ul",content:["Photos or videos of sexual intercourse","Posts showing sexual intercourse, genitals or close-ups of fully-nude buttocks"]},{type:"p",content:"If you report someone's post, 9GAG doesn't tell them who reported it."}]},{name:"Hatred and bullying",description:[{type:"p",content:"Report as hatred and bullying?"},{type:"p",content:"We remove:"},{type:"ul",content:["Posts that contain credible threat","Posts that target people to degrade or shame them","Personal information shared to blackmail or harass","Posts or threats to post nude photo of you"]},{type:"p",content:"If you report someone's post, 9GAG doesn't tell them who reported it."}]},{name:"Self-Harm",description:[{type:"p",content:"Report as self injury?"},{type:"p",content:"We remove:"},{type:"p",content:"We remove posts encouraging or promoting self injury, which includes suicide, cutting and eating disorders. We may also remove posts identifying victims of self injury if the post attacks or makes fun of them."},{type:"p",content:"If you report someone's post, 9GAG doesn't tell them who reported it."}]},{name:"Violent, gory and harmful content",description:[{type:"p",content:"Report as violent, gory and harmful content?"},{type:"p",content:"We remove:"},{type:"ul",content:["Photos or videos of extreme graphic violence","Posts that encourage violence or attack anyone based on their religious, ethnic or sexual background","Specific threats of physical harm, theft, vandalism or financial harm."]},{type:"p",content:"If you report someone's post, 9GAG doesn't tell them who reported it."}]},{name:"Child Porn",description:[{type:"p",content:"Report as child porn?"},{type:"p",content:"We remove:"},{type:"ul",content:["Photos or videos of sexual intercourse with children","Posts of nude or partially nude children"]},{type:"p",content:"If you report someone's post, 9GAG doesn't tell them who reported it."}]},{name:"Illegal activities e.g. Drug Uses",description:[{type:"p",content:"Report as illegal activities?"},{type:"p",content:"We remove and may report to legal entity about:"},{type:"ul",content:["Posts promoting illegal activities, e.g. the use of hard drugs","Posts intended to sell or distribute drugs"]},{type:"p",content:"If you report someone's post, 9GAG doesn't tell them who reported it."}]},{name:"Deceptive content",description:[{type:"p",content:"Report as deceptive content?"},{type:"p",content:"We remove:"},{type:"ul",content:["Purposefully fake or deceitful news","Hoax disproved by a reputable source"]},{type:"p",content:"If you report someone's post, 9GAG doesn't tell them who reported it."}]},{name:"Copyright and trademark infringement",description:[{type:"p",content:"We provides an online platform to allows users to upload and share images, videos, and other content. We take the rights of intellectual property owners very seriously and comply as a service provider with all applicable provisions of the United States Digital Millennium Copyright Act."},{type:"p",content:"If you want to report content that you believe violates or infringes your copyright, please tap continue and fill out the 9GAG DMCA Copyright Infringement Notification form. Note that a report alleging infringement or violation of legal rights must come from the rights owner or someone authorized to report on their behalf (e.g. attorney, agent). If you are not the rights owner or their authorized representative, we will not be able to process your report."}]}],a.reasons=a.reportData.map(function(e){return{name:e.name}}),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.onClose,t=this.state,a=t.loading,o=t.currentReason,s=t.proceed,i=null;s&&(console.log(o),i=this.reportData.filter(function(e){return e.name===o})[0].description.map(function(e,t){if("p"===e.type)return r.a.createElement("p",{key:"p"+t},e.content);if("ul"===e.type){var a=e.content.map(function(e){return r.a.createElement("li",{key:e},e)});return r.a.createElement("ul",{key:"ul"+t},a)}return null}));return r.a.createElement("div",{className:E()("report-modal",{shorter:s}),style:{height:s&&"Copyright and trademark infringement"===o?"530px":""}},r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"modal-header report-modal-header no-border"},r.a.createElement("div",{className:"modal-title "},r.a.createElement("h4",{className:"modal-title-text"},"Report"),r.a.createElement("p",{className:"modal-subtitle-text"},"Choosing the right reason help us process the report as soon as possible.")),r.a.createElement("i",{className:"fas fa-times close-modal",onClick:function(){return e()}})),r.a.createElement("div",{className:"modal-body report-modal-body"},a?r.a.createElement(K,null):null,s?null:r.a.createElement(xe,{data:this.reasons,handleClick:this.handleSectionClick,defaultSection:o}),this.state.error&&r.a.createElement("div",{className:"server-error"},this.handleServerError()),s?r.a.createElement("div",{className:"reason-explain"},i):null),r.a.createElement("div",{className:"modal-footer report-modal-footer no-border"},r.a.createElement("button",{className:"btn btn-secondary",onClick:this.handleCancelClicked},s?"Back ":"Cancel"),r.a.createElement("button",{className:"btn btn-primary",disabled:null===o||this.state.loading,onClick:this.handleNext},a?"Loading":"Next"))))}}]),t}(F),Bt=function(){var e=w.openModal({content:r.a.createElement(_t,{onClose:function(){return e.close()}})});return e.result},Wt=function(e){return r.a.createElement("div",{className:"image-container"},r.a.createElement(i.b,{to:e.redirect},r.a.createElement("img",{src:e.src,alt:"avatar"})))},Gt=function(e){var t=e.user,a=e.points,n=e.createdAt,o=new Date(n),s=qe(o),l="".concat("https://meme-server.onrender.com","/u/").concat(t.username),c=Ie.syncGet().find(function(e){return e._id===t.statusId}),u=c&&"None"!==c.name;return r.a.createElement("p",{className:"comment-info"},r.a.createElement(i.b,{className:"username",to:l},t.username),u?r.a.createElement("span",{className:"status"},r.a.createElement("img",{draggable:"false",className:"emoji",alt:c.alt,src:c.src})):null,t.isPro?r.a.createElement("span",{className:"pro-badge"},"Pro"):null,r.a.createElement("span",{className:"meta"},t.username===e.postCreatedBy?r.a.createElement("span",{title:"Original Poster",className:"role-op"},"OP"):null,a?r.a.createElement("span",{className:"points"},a," points"):null,a?r.a.createElement("span",null," \xb7 "):null,r.a.createElement("span",{className:"time"},r.a.createElement("a",{href:"/",target:"_blank",className:"comment-link"},s))))},Ht=function(e){function t(e){var a;Object(l.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).requestVoteApi=function(){var e=Object(C.a)(N.a.mark(function e(t){var n,r,o,s,i;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.props,r=n.isSubComment,o=n.postId,s=n.comment,i=n.parentComment,!r){e.next=6;break}return e.next=4,Le.updateVoteReply(o,i,s._id,t);case 4:e.next=8;break;case 6:return e.next=8,Le.updateVoteComment(o,s._id,t);case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.requestVoteApi=ve()(a.requestVoteApi,1e3),a.handleVoteClicked=function(){var e=Object(C.a)(N.a.mark(function e(t){var n,r;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=a.state.points,r=a.state.currentVote,t&&"UP"===r?(n-=1,r=""):t||"DOWN"!==r?t&&"DOWN"===r?(n+=2,r="UP"):t||"UP"!==r?t?(n+=1,r="UP"):t||(n-=1,r="DOWN"):(n-=2,r="DOWN"):(n+=1,r=""),a.setState({points:n,currentVote:r}),a.requestVoteApi(t);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();var n="";a.info=ie.getState();var r=a.info,o=a.props.comment,s=o.upVotes,i=o.downVotes,c=o.points;console.log(a.props.comment);var d=s.find(function(e){return e.toString()===r._id.toString()}),h=i.find(function(e){return e.toString()===r._id.toString()});return d?n="UP":h&&(n="DOWN"),a.state={points:c,currentVote:n},a.avatarStyle=null,a.props.isSubComment&&(a.avatarStyle={width:"30px",height:"30px",overflow:"hidden"}),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.comment,n=t.isSubComment,o=this.state,s=o.points,i=o.currentVote,l=a.createdBy,c=null,u=null;return a.imageUrl&&(c=r.a.createElement("div",{className:"media"},r.a.createElement("img",{src:a.imageUrl,alt:"comment-embed"}))),a.content&&(u=r.a.createElement("div",{className:"content"},a.content)),r.a.createElement("div",{className:"comment"},r.a.createElement("div",{className:"avatar",style:this.avatarStyle},r.a.createElement(Wt,{redirect:"".concat("https://meme-server.onrender.com","/u/").concat(l.username),src:l.avatarURL})),r.a.createElement("div",{className:"comment-content"},r.a.createElement("div",{className:"info"},r.a.createElement(Gt,{user:l,points:s,createdAt:a.createdAt,postCreatedBy:this.props.postCreatedBy})),u,c,r.a.createElement("div",{className:"action"},r.a.createElement("span",{className:"action-text",onClick:function(){e.info?n?e.props.handleReplyClicked(l.username):e.props.handleReplyClicked(l.username,a._id):we.open()}},"Reply"),r.a.createElement("div",{className:"vote-btn"},r.a.createElement("span",{className:E()("vote",{active:"UP"===i}),onClick:function(){e.info?e.handleVoteClicked(!0):we.open()}},r.a.createElement("i",{className:"fas fa-arrow-up"})),r.a.createElement("span",{className:E()("vote",{active:"DOWN"===i}),onClick:function(){e.info?e.handleVoteClicked(!1):we.open()}},r.a.createElement("i",{className:"fas fa-arrow-down"}))))),r.a.createElement("div",{className:"extra-menu"},r.a.createElement("i",{className:"fas fa-chevron-down extra-arrow"})))}}]),t}(n.Component),zt=function(e){return r.a.createElement("div",{className:"image-preview"},e.src?r.a.createElement("img",{src:e.src,alt:"comment"}):r.a.createElement(K,null),r.a.createElement("div",{className:"ip-overlay"},e.src?r.a.createElement("i",{className:"fas fa-times",onClick:e.onClose}):null))},qt=function(e){function t(e){var a;Object(l.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).handleServerError=function(){var e=a.state.uploadError.message,t={invalid_picture:"Unsupported dimension",network_error:"Database is ded."};return t.hasOwnProperty(e)?t[e]:"Something bad happened."},a.handlePostComment=function(){var e=new FormData,t=a.form.getData(),n=t.content,r=t.picture,o=t.url,s=ie.getState(),i={_id:Math.floor(100*Math.random())+1,content:n,imageUrl:r?r.src:o,points:0,subcommentsLength:0,createdBy:{avatarURL:s.avatarURL,username:s.username,isPro:s.isPro,statusId:s.statusId},upVotes:[],downVotes:[],createdAt:Date.now()};a.props.commentId?a.props.handlePostReply(i):a.props.handlePostComment(i),e.append("content",n),e.append("file",r?r.file:null),e.append("imageUrl",o||"");var l=function(){return Le.postComment(a.props.postId,e)};a.props.commentId&&(l=function(){return Le.postSubcomment(a.props.postId,a.props.commentId,e)}),l().then(function(e){a.form.resetData(),a.setState({uploadError:null,isPostMemeful:!1,imagePreviewSrc:"",loadingPreview:!1})}).catch(function(e){a.setState({uploadError:e})})},a.handleFileChange=function(){var e=Object(C.a)(N.a.mark(function e(t,n){var r,o,s;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({loadingPreview:!0,uploadError:null}),(r=new FormData).append("file",t.file),e.prev=3,e.next=6,Ne.getCommentPreview(r);case 6:(o=e.sent)&&(s=o.data,a.setState({imagePreviewSrc:s.data,loadingPreview:!1}),n(t)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),a.setState({uploadError:e.t0,imagePreviewSrc:"",loadingPreview:!1});case 13:case"end":return e.stop()}},e,null,[[3,10]])}));return function(t,a){return e.apply(this,arguments)}}(),a.state={uploadError:null,isPostMemeful:!1,imagePreviewSrc:"",loadingPreview:!1};var n=de.object().shape({content:de.string().min(5,"Comment should be at least 5-char long.").max(1e3,"Comment should not longer than 1000 characters."),url:de.string().notRequired().url("This should be a Freaking memeful URL.").matches(/memeful\.com/),picture:de.mixed().notRequired()});return a.form=Q(n,{initData:{content:"",picture:null,url:""}}),a.taggedUser=null,a.commentId=null,a.info=ie.getState(),a.onUnmount(a.form.on("change",function(){return a.forceUpdate()})),a.onUnmount(a.form.on("enter",function(){return null})),a.form.validateData(),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidUpdate",value:function(){!this.props.taggedUser||this.props.taggedUser===this.taggedUser&&this.commentId===this.props.commentId||(this.taggedUser=this.props.taggedUser,this.commentId=this.props.commentId,this.form.updatePathData("content","@".concat(this.taggedUser," ")))}},{key:"render",value:function(){var e=this,t=this.form.getPathData("content"),a=this.state,o=a.isPostMemeful,s=a.imagePreviewSrc,i=a.loadingPreview,l=a.uploadError,c=this.form.getInvalidPaths(),u=!1;u=o?-1!==c.findIndex(function(e){return"url"===e}):-1!==c.findIndex(function(e){return"content"===e});var m=i||null!==l||u;return this.info||(m=!0),r.a.createElement(n.Fragment,null,l&&r.a.createElement("div",{className:"error-notice-message"},r.a.createElement("p",null,this.handleServerError()),r.a.createElement("i",{className:"fas fa-times",onClick:function(){return e.setState({uploadError:""})}})),r.a.createElement("div",{className:"ci-textarea-container"},o?this.form.enhancedComponent("url",function(e){var t=e.error,a=e.onChange,n=(e.onEnter,Object(D.a)(e,["error","onChange","onEnter"]));return r.a.createElement(Y,Object.assign({className:"ci-input",error:t,id:"url",type:"url",placeholder:"Paste URL here",onChange:function(e){a(e)}},n))},!0):this.form.enhancedComponent("content",function(e){var t=e.error,a=e.onChange,n=(e.onEnter,Object(D.a)(e,["error","onChange","onEnter"]));return r.a.createElement(Y,Object.assign({className:"ci-input",inputType:"text-area",error:t,id:"content",type:"text",placeholder:"Write comments...",onChange:function(e){a(e)},maxLength:"1000"},n))},!0)),i||s?r.a.createElement("div",{className:"ci-image-container"},r.a.createElement("div",{className:"image-prev-container"},r.a.createElement(zt,{src:s,onClose:function(){e.setState({imagePreviewSrc:""})}}))):null,r.a.createElement("div",{className:"ci-action"},r.a.createElement("div",{className:"action-left"},o?r.a.createElement("div",{className:"cancel-text",onClick:function(){e.form.resetData(),e.setState({isPostMemeful:!1})}},"Cancel"):r.a.createElement(n.Fragment,null,r.a.createElement("a",{href:"https://memeful.com/",className:"icon",target:"_blank",rel:"noopener noreferrer",onClick:function(){e.form.resetData(),e.setState({isPostMemeful:!0})}},r.a.createElement("i",{className:"far fa-grin"})),this.form.enhancedComponent("picture",function(t){t.error;var a=t.onChange,n=t.value;Object(D.a)(t,["error","onChange","value"]);return r.a.createElement(Qe,{renderBtn:function(e){var t=e.onClick;return r.a.createElement("i",{className:"fas fa-camera icon",onClick:t})},onError:function(t){e.setState({uploadError:t})},onChange:function(t){e.handleFileChange(t,function(){return a(t)})},uploadImageOnly:!0,value:n})}))),r.a.createElement("div",{className:"action-right"},o?null:r.a.createElement("p",{className:"word-count"},1e3-t.length),r.a.createElement("button",{className:"btn btn-primary post-btn",onClick:this.handlePostComment,disabled:m},"Post"))))}}]),t}(F),Qt=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={},a.avatarStyle=null,a.props.isReply&&(a.avatarStyle={width:"30px",height:"30px",overflow:"hidden"}),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=ie.getState(),t=this.props,a=t.handlePostComment,n=t.handlePostReply;return r.a.createElement("div",{className:"comment-section"},r.a.createElement("div",{className:"avatar",style:this.avatarStyle},r.a.createElement(Wt,{redirect:e?"".concat("https://meme-server.onrender.com","/u/").concat(e.username):"/",src:e?e.avatarURL:"".concat("https://meme-server.onrender.com/assets","/1_0_100_v0.jpg")})),r.a.createElement("div",{className:"comment-full"},r.a.createElement(qt,{postId:this.props.postId,commentId:this.props.commentId,taggedUser:this.props.taggedUser,handlePostComment:a,handlePostReply:n})))}}]),t}(n.Component),Yt=function(e){function t(e){var a;Object(l.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).handleLoadReply=Object(C.a)(N.a.mark(function e(){var t,n;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({error:null,loading:!0}),e.prev=1,e.next=4,Le.getSubcomments(a.props.postId,a.props.comment._id);case 4:t=e.sent,n=t.data,a.setState({error:null,loading:!1,subcomments:n}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),a.setState({error:e.t0,loading:!1});case 12:case"end":return e.stop()}},e,null,[[1,9]])})),a.handlePostReply=function(e){var t=Object(He.a)(a.state.subcomments);t.unshift(e),a.setState(function(e,a){return{subcommentsLength:e.subcommentsLength+1,subcomments:t}})};var n=a.props.comment;return a.state={showReplyInput:!1,subcomments:[],subcommentsLength:n.subcommentsLength,error:null,loading:!1},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidUpdate",value:function(){this.props.showReplyInput!==this.state.showReplyInput&&this.setState({showReplyInput:this.props.showReplyInput})}},{key:"render",value:function(){var e=this,t=this.props,a=t.comment,o=t.handleReplyClicked,s=this.state,i=s.showReplyInput,l=s.subcommentsLength,c=s.subcomments,u=s.loading,m=l-c.length>0;return r.a.createElement(n.Fragment,null,r.a.createElement(Ht,{postId:this.props.postId,comment:a,postCreatedBy:this.props.postCreatedBy,handleReplyClicked:o}),0!==c.length?c.map(function(t){return r.a.createElement("div",{style:{marginLeft:"20px"},key:t._id.toString()},r.a.createElement(Ht,{postId:e.props.postId,parentComment:a._id,comment:t,postCreatedBy:e.props.postCreatedBy,isSubComment:!0,handleReplyClicked:function(e){o(e,a._id)}}))}):null,0!==l&&m?r.a.createElement("div",{className:"collasped-comment",onClick:this.handleLoadReply},u?"Loading...":0===c.length?"View ".concat(l," replies"):"Load more replies"):null,i?r.a.createElement("div",{style:{marginLeft:"20px",marginTop:"5px",marginBottom:"20px"}},r.a.createElement(Qt,{postId:this.props.postId,commentId:a._id,taggedUser:this.props.taggedUser,handlePostReply:this.handlePostReply})):null)}}]),t}(n.Component),Kt=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).handleReplyClicked=function(e,t){a.setState({focusedReply:{username:e,commentId:t}})},a.state={comments:a.props.comments,loading:!1,error:null,focusedReply:{username:null,commentId:null}},a.postId=a.props.postId,a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidUpdate",value:function(){this.props.comments!==this.state.comments&&this.setState({comments:this.props.comments})}},{key:"render",value:function(){var e=this,t=this.state,a=t.comments,n=t.focusedReply;return r.a.createElement("div",null,a.map(function(t){return r.a.createElement(Yt,{key:t._id,postCreatedBy:e.props.postCreatedBy,comment:t,postId:e.postId,showReplyInput:t._id===n.commentId,handleReplyClicked:e.handleReplyClicked,taggedUser:n.username,handlePostComment:e.handlePostComment})}))}}]),t}(n.Component),Jt=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).handlePostComment=function(e){var t=Object(He.a)(a.state.comments);t.unshift(e),a.setState({comments:t})},a.state={comments:[],loading:!1,error:null},a.postId=a.props.postId,a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({loading:!0,error:null}),Le.getComments(this.postId).then(function(t){var a=t.data;e.setState({loading:!0,error:null,comments:a})}).catch(function(t){return e.setState({loading:!1,error:t})})}},{key:"render",value:function(){var e=this.state.comments;return r.a.createElement(n.Fragment,null,r.a.createElement(Qt,{postId:this.props.postId,handlePostComment:this.handlePostComment}),r.a.createElement("div",{style:{marginTop:"20px"}},r.a.createElement(Kt,{postId:this.props.postId,postCreatedBy:this.props.createdBy,comments:e})))}}]),t}(n.Component),Zt=function(e){function t(e){var a;Object(l.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).handleVote=function(){var e=Object(C.a)(N.a.mark(function e(t){var n,r,o,s,i,l,c,u,m,d,h;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:ie.getState()?(n=a.state,r=n.currentVote,o=n.upVoteCount,s=n.downVoteCount,"UP"===r?(i=o-1<0?0:o-1,t?a.setState({currentVote:"",upVoteCount:i}):(l=s+1,a.setState({currentVote:"DOWN",upVoteCount:i,downVoteCount:l}))):"DOWN"===r?(c=s-1<0?0:s-1,t?(u=o+1,a.setState({currentVote:"UP",downVoteCount:c,upVoteCount:u})):a.setState({currentVote:"",downVoteCount:c})):t?(m=o+1,a.setState({currentVote:"UP",upVoteCount:m})):(d=s+1,a.setState({currentVote:"DOWN",downVoteCount:d})),h=null,clearTimeout(a.timeout),a.timeout=setTimeout(Object(C.a)(N.a.mark(function e(){var n,r,o;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t){e.next=7;break}return e.next=4,Le.updateVotePost(a.props.post._id,1);case 4:h=e.sent,e.next=10;break;case 7:return e.next=9,Le.updateVotePost(a.props.post._id,0);case 9:h=e.sent;case 10:n=h.data,r=n.upVoteCount,o=n.downVoteCount,a.setState({upVoteCount:r,downVoteCount:o}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),a.setState({error:e.t0});case 17:case"end":return e.stop()}},e,null,[[0,14]])})),1e3)):we.open(function(){return a.props.history.push("/")},function(){a.handleVote(t)});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();var n=ie.getState(),r="";if(n){var o=a.props.post._id,s=n.upVotes.findIndex(function(e){return e===o}),i=n.downVotes.findIndex(function(e){return e===o});-1!==s?r="UP":-1!==i&&(r="DOWN")}return a.state={upVoteCount:a.props.post.upVoteCount,downVoteCount:a.props.post.downVoteCount,currentVote:r,error:null},a.pictureStyle={},a.videoStyle={},a.videoContainerStyle={},a.timeout=null,a.onUnmount(ie.onChange(function(e,t){if(e){if(!t){var n=e.upVotes,r=e.downVotes,o=a.props.post._id,s=n.findIndex(function(e){return e===o});-1!==s?a.setState({currentVote:"UP"}):-1!==(s=r.findIndex(function(e){return e===o}))&&a.setState({currentVote:"DOWN"})}}else a.setState({currentVote:""})})),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){var e=this.props.post,t=e.images,a=e.type,n=t.image460sv,r=t.image700;if("Photo"===a)r.width===r.height?this.pictureStyle={width:600,minHeight:600}:this.pictureStyle={width:600,minHeight:600/r.width*r.height};else if("Animated"===a)if(n.width===n.height)this.videoStyle={minHeight:600};else if(n.width>n.height)this.videoStyle={minHeight:600/n.width*n.height};else{var o=640/n.height*n.width;this.videoStyle={width:o,minHeight:640},this.videoContainerStyle={paddingLeft:(600-o)/2}}}},{key:"render",value:function(){var e=this,t=this.props.post,a=t.images,n=t.type,o=t.createdAt,s=a.image700,l=this.state,c=l.downVoteCount,u=l.upVoteCount;console.log(t);var m=qe(new Date(o)),d=r.a.createElement("div",{style:{margin:"0 auto",width:"600px"}},r.a.createElement("picture",{style:this.pictureStyle},s.webpUrl?r.a.createElement("source",{srcSet:s.webpUrl,type:"image/webp"}):null,r.a.createElement("img",{src:s.url,alt:t.name,style:this.pictureStyle})));return"Animated"===n&&(d=r.a.createElement(At,{video:a,videoStyle:this.videoStyle,containerStyle:this.videoContainerStyle})),r.a.createElement("article",{className:E()("full-post")},r.a.createElement("header",{className:"post-header"},r.a.createElement("div",{className:"post-section"},r.a.createElement("img",{className:"post-section__category-icon",src:t.categoryId.imageUrl,alt:"category-icon"}),r.a.createElement("p",{className:"post-section__message"},r.a.createElement("span",null,t.categoryId.name)," \xb7 "+m)),r.a.createElement("h1",null,t.title),r.a.createElement("p",{className:"post-meta"},r.a.createElement(i.b,{to:"/",className:"post-meta__text"},u-c+" points")," \xb7 ",r.a.createElement(i.b,{to:"/",className:"post-meta__text"},t.comments.length+" comments"))),r.a.createElement("div",{className:"full-post-after-bar"},r.a.createElement("ul",{className:"btn-vote left"},r.a.createElement("li",null,r.a.createElement("div",{className:E()("btn-border up",{selected:"UP"===this.state.currentVote}),onClick:function(){return e.handleVote(!0)}})),r.a.createElement("li",null,r.a.createElement("div",{className:E()("btn-border down",{selected:"DOWN"===this.state.currentVote}),onClick:function(){return e.handleVote(!1)}}))),r.a.createElement("div",null,r.a.createElement("ul",{className:"btn-vote left"},r.a.createElement("li",null,r.a.createElement(gt.a,{url:"https://github.com"},r.a.createElement($,{text:"Facebook"}))),r.a.createElement("li",null,r.a.createElement(vt.a,{url:"https://github.com",media:t.images.image700.url},r.a.createElement(ee,{text:"Pinterest"}))),r.a.createElement("li",null,r.a.createElement("div",{className:"btn-border more"}))),r.a.createElement("div",{className:"popup-viewshare hide"},r.a.createElement("ul",null,r.a.createElement("li",null,"Twitter"),r.a.createElement("li",null,"Email"),r.a.createElement("li",null,"Report"),r.a.createElement("li",null,"I just don't like it")))),r.a.createElement("div",{className:"btn-next right"},r.a.createElement("span",{className:"btn-next-body"},"Next Post"),r.a.createElement("span",{className:"btn-next-arrow"})),r.a.createElement("div",{className:"clearfix"})),r.a.createElement("div",{className:"full-post-container"},d),r.a.createElement("div",{style:{display:"flex",marginTop:"16px"}},r.a.createElement(gt.a,{url:"https://github.com",style:{flexGrow:"2",display:"flex"}},r.a.createElement($,{text:"Share on Facebook",height:44,fontSize:15,marginRight:8}))," ",r.a.createElement(vt.a,{url:"https://github.com",media:t.images.image700.url,style:{flexGrow:"2",display:"flex"}},r.a.createElement(ee,{text:"Share on Pinterest",height:44,fontSize:15}))),r.a.createElement("div",{style:{marginTop:"8px"}},r.a.createElement("p",{className:"full-post-report-text",onClick:function(){ie.getState()?Bt():we.open()}},"REPORT")),r.a.createElement("div",{className:"full-post-comments"},r.a.createElement("div",{className:"full-post-comments__top-bar"},r.a.createElement("div",{className:"full-post-comments__cmts"},"".concat(t.comments.length," Comments")),r.a.createElement("div",{className:"full-post-comments__filter"},r.a.createElement("ul",null,r.a.createElement("li",{className:E()({active:!0})},"Hot"),r.a.createElement("li",{className:E()({active:!1})},"Fresh")))),r.a.createElement("div",{className:"full-post-comments__content"},r.a.createElement(Jt,{postId:t._id,createdBy:t.createdBy.username}))))}}]),t}(F),Xt=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={post:null},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;window.scrollTo(0,0);var t=this.props.match.params.postId;Le.getPost(t).then(function(t){e.setState({post:t.data.post})}).catch(function(t){return e.props.history.push("/not-found")})}},{key:"render",value:function(){var e=this.state.post;return r.a.createElement(dt,null,e?r.a.createElement(Zt,{post:e,history:this.props.history}):null)}}]),t}(n.Component),$t=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(A,null),r.a.createElement(h.c,null,r.a.createElement(h.a,{path:"/gag/:postId",component:Xt}),r.a.createElement(h.a,{path:"/test-nav-bar",component:tt}),r.a.createElement(h.a,{path:"/feed",component:kt}),r.a.createElement(h.a,{path:"/verify-user",component:Tt}),r.a.createElement(h.a,{path:"/confirm-reset-password",component:Mt}),r.a.createElement(h.a,{path:"/forgot-password",component:It}),r.a.createElement(h.a,{path:"/test",exact:!0,component:Ct}),r.a.createElement(h.a,{path:"/settings",component:Vt}),r.a.createElement(h.a,{path:"/",exact:!0,component:Nt}),r.a.createElement(h.a,{component:St})))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));(function(){return ue.addHeader("Authorization",function(){var e=ce.getAuthen();return e?"Bearer ".concat(e):null}),(e=[function(){return ce.loadAuthen()},function(){return Promise.all([Ve.get(),Fe.get(),Ie.get()])}],new Promise(function(t,a){var n=[],r=function(){n.length===e.length&&t(n)},o=!0,s=!1,i=void 0;try{for(var l,c=e[Symbol.iterator]();!(o=(l=c.next()).done);o=!0)(0,l.value)().then(function(e){n.push(e),r()}).catch(function(e){n.push({error:e}),r()})}catch(u){s=!0,i=u}finally{try{o||null==c.return||c.return()}finally{if(s)throw i}}})).then(function(e){console.log("[Async Parallel Init: ]",e),Promise.resolve(e)}).catch(function(e){return Promise.resolve()});var e})().then(function(){return s.a.render(r.a.createElement(i.a,null,r.a.createElement($t,null)),document.getElementById("root"))}),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[215,1,2]]]);
//# sourceMappingURL=main.d6e15085.chunk.js.map